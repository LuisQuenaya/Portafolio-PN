<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Unidad 2 ‚Äî Portafolio Completo</title>

    <!-- MathJax para f√≥rmulas matem√°ticas -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    
    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Estilos completos -->
    <style>
        /* VARIABLES DE COLOR - TEMA AZUL/GRADIENTE */
        :root {
            --azul-primario: #0066cc;
            --azul-secundario: #003366;
            --azul-oscuro: #001f3f;
            --azul-degradado: linear-gradient(135deg, #0066cc, #0044aa);
            --degradado-blanco: linear-gradient(135deg, #ffffff, #f0f8ff);
            --degradado-azul-claro: linear-gradient(135deg, #e6f2ff, #f0f8ff);
            --blanco: #ffffff;
            --blanco-hueso: #f8f9fa;
            --gris-claro: #eef2f7;
            --gris-medio: #6c757d;
            --gris-oscuro: #2c3e50;
            --verde: #28a745;
            --rojo: #dc3545;
            --amarillo: #ffc107;
            --sombra: rgba(0, 51, 102, 0.15);
            --sombra-fuerte: rgba(0, 51, 102, 0.25);
        }
        
        /* RESET Y CONFIGURACI√ìN BASE */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(180deg, var(--gris-claro) 0%, var(--blanco) 100%);
            color: var(--gris-oscuro);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        /* HEADER CON DEGRADADO AZUL ANIMADO */
        .header {
            background: var(--azul-degradado);
            color: var(--blanco);
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px var(--sombra-fuerte);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 8px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .header h2 {
            font-size: 1.2rem;
            font-weight: 300;
            opacity: 0.9;
            position: relative;
        }
        
        /* NAVEGACI√ìN POR PESTA√ëAS */
        .nav-container {
            background: var(--blanco);
            box-shadow: 0 2px 15px var(--sombra);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-tabs {
            display: flex;
            overflow-x: auto;
            padding: 0;
            max-width: 1200px;
            margin: 0 auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .nav-tab {
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--gris-oscuro);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            font-size: 0.9rem;
        }
        
        .nav-tab:hover {
            background: var(--gris-claro);
            color: var(--azul-primario);
        }
        
        .nav-tab.active {
            background: var(--blanco);
            border-bottom: 3px solid var(--azul-primario);
            color: var(--azul-primario);
            font-weight: 600;
        }
        
        /* CONTENIDO PRINCIPAL */
        .main-content {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        /* CONTENEDOR DE ACTIVIDAD */
        .activity-container {
            background: var(--degradado-blanco);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 30px var(--sombra);
            border: 1px solid rgba(0, 102, 204, 0.1);
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .activity-container h2 {
            color: var(--azul-secundario);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--azul-primario);
            font-size: 1.8rem;
        }
        
        /* BOTONES */
        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }
        
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        
        .btn-primary {
            background: var(--azul-primario);
            color: var(--blanco);
        }
        
        .btn-primary:hover {
            background: var(--azul-secundario);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 102, 204, 0.3);
        }
        
        .btn-secondary {
            background: var(--blanco);
            color: var(--azul-primario);
            border: 2px solid var(--azul-primario);
        }
        
        .btn-secondary:hover {
            background: var(--gris-claro);
            transform: translateY(-2px);
        }
        
        /* SECCIONES */
        .section {
            background: var(--blanco);
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 4px 15px var(--sombra);
            border-left: 4px solid var(--azul-primario);
        }
        
        .section h3 {
            color: var(--azul-secundario);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        
        /* F√ìRMULAS */
        .formula-container {
            background: var(--degradado-azul-claro);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 1px solid rgba(0, 102, 204, 0.2);
            box-shadow: 0 2px 10px rgba(0, 102, 204, 0.1);
        }
        
        .formula {
            font-size: 1.1rem;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--blanco);
            border-radius: 6px;
            border-left: 3px solid var(--azul-primario);
            overflow-x: auto;
        }
        
        /* TABLAS */
        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            background: var(--blanco);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px var(--sombra);
        }
        
        .table th {
            background: linear-gradient(135deg, var(--azul-primario), var(--azul-secundario));
            color: var(--blanco);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }
        
        .table td {
            padding: 0.8rem 1rem;
            border-bottom: 1px solid var(--gris-claro);
        }
        
        .table tr:hover {
            background: var(--gris-claro);
        }
        
        /* C√ìDIGO */
        .code-container {
            background: var(--azul-oscuro);
            border-radius: 8px;
            margin: 1.5rem 0;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        
        .code-header {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.8rem 1rem;
            color: var(--blanco);
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .code {
            padding: 1.5rem;
            color: #e6fbff;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            overflow-x: auto;
            white-space: pre-wrap;
            tab-size: 4;
        }
        
        /* SIMULACIONES */
        .simulation-container {
            background: var(--degradado-azul-claro);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 2px solid var(--azul-primario);
            box-shadow: 0 8px 25px var(--sombra);
        }
        
        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .input-field {
            padding: 0.8rem 1rem;
            border: 2px solid var(--gris-claro);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--blanco);
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--azul-primario);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
        }
        
        .results {
            background: var(--blanco);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid var(--gris-claro);
            max-height: 400px;
            overflow-y: auto;
        }
        
        /* CANVAS PARA GR√ÅFICOS */
        .canvas-container {
            background: var(--blanco);
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
            box-shadow: 0 4px 15px var(--sombra);
        }
        
        canvas {
            display: block;
            max-width: 100%;
            height: auto;
            border-radius: 6px;
        }
        
        /* FOOTER */
        .footer {
            background: var(--azul-secundario);
            color: var(--blanco);
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }
        
        /* MEN√ö PRINCIPAL - GRID */
        .grid-activities {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .grid-activities .section {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .grid-activities .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px var(--sombra-fuerte);
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .nav-tabs {
                padding: 0 0.5rem;
            }
            
            .nav-tab {
                padding: 0.8rem 1rem;
                font-size: 0.8rem;
            }
            
            .activity-container {
                padding: 1.5rem;
            }
            
            .input-group {
                grid-template-columns: 1fr;
            }
            
            .btn-group {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .grid-activities {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        <h1>Programaci√≥n Num√©rica - Unidad 2</h1>
        <h2>Portafolio Digital Completo con Simulaciones Interactivas</h2>
        <p>Luis Angel Quenaya Loza | C√≥digo: 241411</p>
    </div>

    <!-- NAVEGACI√ìN -->
    <div class="nav-container">
        <div class="nav-tabs" id="navTabs">
            <button class="nav-tab active" onclick="showActivity('menu')">üè† Inicio</button>
            <button class="nav-tab" onclick="showActivity('act1')">1. Bisecci√≥n</button>
            <button class="nav-tab" onclick="showActivity('act2')">2. Secante</button>
            <button class="nav-tab" onclick="showActivity('act3')">3. Punto Fijo</button>
            <button class="nav-tab" onclick="showActivity('act4')">4. Regula Falsi</button>
            <button class="nav-tab" onclick="showActivity('act5')">5. Newton-Raphson</button>
            <button class="nav-tab" onclick="showActivity('act6')">6. √çndice H</button>
            <button class="nav-tab" onclick="showActivity('act7')">7. Gradiente</button>
            <button class="nav-tab" onclick="showActivity('act8')">8. Pseudoinverso vs GD</button>
            <button class="nav-tab" onclick="showActivity('act9')">9. Simulaci√≥n Caramelos</button>
            <button class="nav-tab" onclick="showActivity('act10')">10. Algoritmo Demons</button>
            <button class="nav-tab" onclick="showActivity('act11')">11. Diferenciaci√≥n Num√©rica</button>
            <button class="nav-tab" onclick="showActivity('act12')">12. Interpolaci√≥n Num√©rica</button>
            <button class="nav-tab" onclick="showActivity('act13')">13. Apache JMeter</button>
            <button class="nav-tab" onclick="showActivity('act14')">14. Poster Cient√≠fico</button>
            <button class="nav-tab" onclick="showActivity('act15')">15. Eigenvalores</button>
            <button class="nav-tab" onclick="showActivity('act16')">16. Cadenas de Markov</button>
            <button class="nav-tab" onclick="showActivity('act17')">17. Libro Completo</button>
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="main-content">
        
        <!-- MEN√ö PRINCIPAL -->
        <div id="menu" class="activity-content" style="display: block;">
            <div class="activity-container">
                <h2>üìö Portafolio Digital - Unidad 2</h2>
                <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: linear-gradient(135deg, rgba(0,102,204,0.1), rgba(0,102,204,0.05)); border-radius: 10px;">
                    <p style="font-size: 1.1rem; margin-bottom: 1rem;">
                        Selecciona una actividad para ver su contenido te√≥rico, f√≥rmulas, c√≥digo fuente y simulaciones interactivas.
                    </p>
                    <p style="color: var(--azul-primario); font-weight: 600;">
                        Universidad Nacional del Altiplano | Facultad de Ingenier√≠a Estad√≠stica e Inform√°tica
                    </p>
                </div>
                
                <div class="grid-activities">
                    <!-- ACTIVIDADES 1-5 -->
                    <div class="section" onclick="showActivity('act1')">
                        <h3>1. M√©todo de Bisecci√≥n</h3>
                        <p>Encuentra ra√≠ces mediante divisi√≥n sucesiva de intervalos.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Teorema de Bolzano | Convergencia garantizada</div>
                    </div>
                    
                    <div class="section" onclick="showActivity('act2')">
                        <h3>2. M√©todo de la Secante</h3>
                        <p>Aproximaci√≥n de ra√≠ces usando rectas secantes.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Sin derivadas | Orden 1.618</div>
                    </div>
                    
                    <div class="section" onclick="showActivity('act3')">
                        <h3>3. M√©todo del Punto Fijo</h3>
                        <p>Transforma b√∫squeda de ra√≠ces en puntos fijos.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Condici√≥n: |g'(x)| < 1</div>
                    </div>
                    
                    <div class="section" onclick="showActivity('act4')">
                        <h3>4. M√©todo de Regula Falsi</h3>
                        <p>M√©todo de falsa posici√≥n h√≠brido.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">F√≥rmula: x·µ£ = b - f(b)(b-a)/(f(b)-f(a))</div>
                    </div>
                    
                    <div class="section" onclick="showActivity('act5')">
                        <h3>5. Newton-Raphson</h3>
                        <p>M√©todo iterativo r√°pido con derivadas.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Convergencia cuadr√°tica | F√≥rmula: x‚Çô‚Çä‚ÇÅ = x‚Çô - f(x‚Çô)/f'(x‚Çô)</div>
                    </div>
                    
                    <!-- ACTIVIDAD 6: √çNDICE H -->
                    <div class="section" onclick="showActivity('act6')">
                        <h3>6. √çndice H</h3>
                        <p>M√©trica bibliom√©trica para impacto cient√≠fico.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Hirsch (2005) | h publicaciones con ‚â• h citas</div>
                    </div>
                    
                    <!-- ACTIVIDAD 7: GRADIENTE -->
                    <div class="section" onclick="showActivity('act7')">
                        <h3>7. Gradiente de una Funci√≥n</h3>
                        <p>Vector de m√°ximo crecimiento y descenso.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">‚àáf(x,y) = (‚àÇf/‚àÇx, ‚àÇf/‚àÇy) | Descenso del gradiente</div>
                    </div>
                    
                    <!-- ACTIVIDAD 8: PSEUDOINVERSO vs GRADIENTE -->
                    <div class="section" onclick="showActivity('act8')">
                        <h3>8. Pseudoinverso vs Descenso Gradiente</h3>
                        <p>Comparaci√≥n en regresi√≥n lineal.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">An√°lisis computacional | Estabilidad num√©rica</div>
                    </div>
                    
                    <!-- ACTIVIDAD 9: SIMULACI√ìN CARAMELOS -->
                    <div class="section" onclick="showActivity('act9')">
                        <h3>9. Simulaci√≥n Juego de Caramelos</h3>
                        <p>Simulaci√≥n estoc√°stica cooperativa.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">18 estudiantes | Caramelos A,B,C | Reglas de intercambio</div>
                    </div>
                    
                    <!-- ACTIVIDAD 10: ALGORITMO DEMONS -->
                    <div class="section" onclick="showActivity('act10')">
                        <h3>10. Algoritmo Demons</h3>
                        <p>Registro no r√≠gido de im√°genes m√©dicas.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Thirion (1998) | Campo de imagen | Registro deformable</div>
                    </div>
                    
                    <!-- ACTIVIDAD 11: DIFERENCIACI√ìN NUM√âRICA -->
                    <div class="section" onclick="showActivity('act11')">
                        <h3>11. Diferenciaci√≥n Num√©rica</h3>
                        <p>F√≥rmulas de diferencias finitas.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Diferencias adelante/atr√°s/centradas | Error de truncamiento</div>
                    </div>
                    
                    <!-- ACTIVIDAD 12: INTERPOLACI√ìN NUM√âRICA -->
                    <div class="section" onclick="showActivity('act12')">
                        <h3>12. Interpolaci√≥n Num√©rica</h3>
                        <p>M√©todos de interpolaci√≥n matem√°tica.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Lagrange | Newton | Splines c√∫bicos | Polinomios de Bernstein</div>
                    </div>
                    
                    <!-- ACTIVIDAD 13: APACHE JMETER -->
                    <div class="section" onclick="showActivity('act13')">
                        <h3>13. Apache JMeter</h3>
                        <p>Pruebas de rendimiento web.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">ESPN vs DSports | 1000 usuarios | Percentiles | Interpolaci√≥n lineal</div>
                    </div>
                    
                    <!-- ACTIVIDAD 14: POSTER CIENT√çFICO -->
                    <div class="section" onclick="showActivity('act14')">
                        <h3>14. Poster Cient√≠fico</h3>
                        <p>Dise√±o de investigaci√≥n acad√©mica.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Estructura IMRD | Visualizaci√≥n de datos | Comunicaci√≥n cient√≠fica</div>
                    </div>
                    
                    <!-- ACTIVIDAD 15: EIGENVALORES -->
                    <div class="section" onclick="showActivity('act15')">
                        <h3>15. Eigenvalores y Eigenvectores</h3>
                        <p>An√°lisis de transformaciones lineales.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">A¬∑v = Œª¬∑v | Diagonalizaci√≥n | Hessiana y puntos cr√≠ticos</div>
                    </div>
                    
                    <!-- ACTIVIDAD 16: CADENAS DE MARKOV -->
                    <div class="section" onclick="showActivity('act16')">
                        <h3>16. Cadenas de Markov</h3>
                        <p>Procesos estoc√°sticos discretos.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">Matriz de transici√≥n | Estado estable | Predicci√≥n de estados</div>
                    </div>
                    
                    <!-- ACTIVIDAD 17: LIBRO COMPLETO -->
                    <div class="section" onclick="showActivity('act17')">
                        <h3>17. Libro de la Unidad</h3>
                        <p>Compilaci√≥n completa del contenido.</p>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gris-medio);">PDF interactivo | C√≥digos fuente | Ejercicios resueltos | Referencias</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================================
                              ACTIVIDADES 1-5
        ============================================================= -->
        
        <!-- ACTIVIDAD 1: BISECCI√ìN -->
        <div id="act1" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 1 ‚Äî M√©todo de Bisecci√≥n</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-secondary" onclick="window.open('BISECCION.pdf', '_blank')">üìò Ver PDF</button>
                    <button class="btn btn-primary" onclick="ejecutarBiseccion()">üéØ Ejecutar Bisecci√≥n</button>
                </div>

                <!-- TEOR√çA -->
                <div class="section">
                    <h3>üìò Teor√≠a del M√©todo de Bisecci√≥n</h3>
                    <p>El m√©todo de bisecci√≥n es un algoritmo de b√∫squeda incremental que encuentra ra√≠ces de funciones continuas bas√°ndose en el <strong>Teorema de Bolzano</strong>.</p>
                    
                    <div class="formula-container">
                        <h4>Teorema de Bolzano (Valor Intermedio)</h4>
                        <div class="formula">
                            Si $f$ es continua en $[a,b]$ y $f(a) \cdot f(b) < 0$,
                            entonces existe al menos un $c \in (a,b)$ tal que $f(c) = 0$.
                        </div>
                    </div>
                    
                    <div class="formula-container">
                        <h4>Algoritmo de Bisecci√≥n</h4>
                        <ol>
                            <li>Verificar que $f(a) \cdot f(b) < 0$</li>
                            <li>Calcular $c = \frac{a+b}{2}$</li>
                            <li>Evaluar $f(c)$</li>
                            <li>Si $f(a) \cdot f(c) < 0$, entonces $b = c$</li>
                            <li>Si $f(b) \cdot f(c) < 0$, entonces $a = c$</li>
                            <li>Repetir hasta alcanzar tolerancia</li>
                        </ol>
                    </div>
                </div>

                <!-- F√ìRMULAS -->
                <div class="section">
                    <h3>üìê F√≥rmulas Matem√°ticas</h3>
                    
                    <div class="formula">
                        <strong>Punto medio:</strong>
                        $$ c_n = \frac{a_n + b_n}{2} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Error absoluto:</strong>
                        $$ E_n = \frac{b_n - a_n}{2} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Error relativo:</strong>
                        $$ e_n = \frac{|c_n - c_{n-1}|}{|c_n|} $$
                    </div>
                    
                    <div class="formula">
                        <strong>N√∫mero de iteraciones requeridas:</strong>
                        $$ n \geq \frac{\ln\left(\frac{b-a}{\varepsilon}\right)}{\ln(2)} $$
                    </div>
                </div>

                <!-- SIMULACI√ìN -->
                <div class="simulation-container">
                    <h3>üéÆ Simulaci√≥n Interactiva del M√©todo de Bisecci√≥n</h3>
                    
                    <div class="input-group">
                        <input type="text" id="funcBiseccion" class="input-field" 
                               placeholder="Funci√≥n f(x). Ej: x^3 - 2*x - 5" 
                               value="x^3 - 2*x - 5">
                        <input type="number" id="aBiseccion" class="input-field" 
                               placeholder="L√≠mite inferior a" value="2" step="0.1">
                        <input type="number" id="bBiseccion" class="input-field" 
                               placeholder="L√≠mite superior b" value="3" step="0.1">
                        <input type="number" id="tolBiseccion" class="input-field" 
                               placeholder="Tolerancia" value="0.0001" step="0.0001" min="0.000001">
                        <input type="number" id="iterBiseccion" class="input-field" 
                               placeholder="Iteraciones m√°x" value="50" min="1" max="1000">
                    </div>
                    
                    <button class="btn btn-primary" onclick="ejecutarBiseccion()">
                        üöÄ Ejecutar M√©todo de Bisecci√≥n
                    </button>
                    
                    <div class="results" id="resultadosBiseccion">
                        <p style="color: var(--gris-medio);">Los resultados aparecer√°n aqu√≠...</p>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="graficoBiseccion" width="800" height="400"></canvas>
                    </div>
                </div>

                <!-- C√ìDIGO -->
                <div class="section">
                    <h3>üíª Implementaci√≥n en Python</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span>biseccion.py</span>
                            <button class="btn btn-secondary" onclick="copiarCodigo('codigoBiseccion')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">Copiar</button>
                        </div>
                        <pre class="code" id="codigoBiseccion">import numpy as np
import matplotlib.pyplot as plt

def biseccion(f, a, b, tol=1e-6, max_iter=100):
    """
    M√©todo de bisecci√≥n para encontrar ra√≠ces de f(x)=0.
    
    Par√°metros:
    -----------
    f : funci√≥n
        Funci√≥n continua f(x)
    a, b : float
        Extremos del intervalo [a,b] donde f(a)*f(b) < 0
    tol : float
        Tolerancia para el error
    max_iter : int
        M√°ximo n√∫mero de iteraciones
    
    Retorna:
    --------
    c : float
        Aproximaci√≥n de la ra√≠z
    historia : list
        Lista de tuplas (a, b, c, f(c), error)
    """
    
    # Verificar condiciones iniciales
    if f(a) * f(b) >= 0:
        raise ValueError("No se cumple f(a)*f(b) < 0")
    
    historia = []
    
    for i in range(max_iter):
        # Calcular punto medio
        c = (a + b) / 2
        fc = f(c)
        
        # Calcular error
        error = (b - a) / 2
        
        # Guardar en historial
        historia.append((a, b, c, fc, error))
        
        # Verificar convergencia
        if abs(fc) < tol or error < tol:
            print(f"Convergencia alcanzada en {i+1} iteraciones")
            break
        
        # Actualizar intervalo
        if f(a) * fc < 0:
            b = c
        else:
            a = c
    
    return c, historia

# Ejemplo de uso
if __name__ == "__main__":
    # Definir funci√≥n
    def f(x):
        return x**3 - 2*x - 5
    
    # Par√°metros iniciales
    a = 2.0
    b = 3.0
    tol = 1e-6
    max_iter = 50
    
    try:
        # Ejecutar m√©todo de bisecci√≥n
        raiz, historia = biseccion(f, a, b, tol, max_iter)
        
        # Mostrar resultados
        print("="*60)
        print("M√âTODO DE BISECCI√ìN")
        print("="*60)
        print(f"Funci√≥n: f(x) = x¬≥ - 2x - 5")
        print(f"Intervalo inicial: [{a}, {b}]")
        print(f"Tolerancia: {tol}")
        print(f"\nRa√≠z aproximada: {raiz:.8f}")
        print(f"f(ra√≠z) = {f(raiz):.2e}")
        print(f"Iteraciones realizadas: {len(historia)}")
        
        # Mostrar tabla de iteraciones
        print("\n" + "="*60)
        print("Iter |     a     |     b     |     c     |    f(c)    |   Error")
        print("-"*60)
        for i, (a_i, b_i, c_i, fc_i, error_i) in enumerate(historia):
            print(f"{i+1:4d} | {a_i:9.6f} | {b_i:9.6f} | {c_i:9.6f} | {fc_i:10.6f} | {error_i:9.6f}")
        
        # Calcular n√∫mero te√≥rico de iteraciones
        n_teorico = np.ceil(np.log((b-a)/tol) / np.log(2))
        print(f"\nIteraciones te√≥ricas necesarias: {int(n_teorico)}")
        
        # Visualizaci√≥n
        fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))
        
        # Gr√°fico 1: Funci√≥n y ra√≠z
        x = np.linspace(1.5, 3.5, 400)
        ax1.plot(x, f(x), 'b-', linewidth=2, label='f(x) = x¬≥ - 2x - 5')
        ax1.axhline(y=0, color='k', linestyle='--', alpha=0.3)
        ax1.plot(raiz, f(raiz), 'ro', markersize=8, label=f'Ra√≠z ‚âà {raiz:.4f}')
        ax1.set_xlabel('x')
        ax1.set_ylabel('f(x)')
        ax1.set_title('Funci√≥n y ra√≠z encontrada')
        ax1.grid(True, alpha=0.3)
        ax1.legend()
        
        # Gr√°fico 2: Convergencia del error
        iteraciones = range(1, len(historia)+1)
        errores = [h[4] for h in historia]
        ax2.semilogy(iteraciones, errores, 'go-', linewidth=2, markersize=6)
        ax2.set_xlabel('Iteraci√≥n')
        ax2.set_ylabel('Error (escala log)')
        ax2.set_title('Convergencia del error')
        ax2.grid(True, alpha=0.3)
        
        plt.tight_layout()
        plt.show()
        
    except ValueError as e:
        print(f"Error: {e}")</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 2: SECANTE -->
        <div id="act2" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 2 ‚Äî M√©todo de la Secante</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-secondary" onclick="window.open('Secante.pdf', '_blank')">üìò Ver PDF</button>
                    <button class="btn btn-primary" onclick="ejecutarSecante()">üéØ Ejecutar Secante</button>
                </div>

                <!-- TEOR√çA -->
                <div class="section">
                    <h3>üìò Teor√≠a del M√©todo de la Secante</h3>
                    <p>El m√©todo de la secante es un m√©todo iterativo para encontrar ra√≠ces de funciones que no requiere el c√°lculo de derivadas. Se basa en la interpolaci√≥n lineal entre dos puntos.</p>
                    
                    <div class="formula-container">
                        <h4>Interpretaci√≥n Geom√©trica</h4>
                        <p>Dados dos puntos $(x_0, f(x_0))$ y $(x_1, f(x_1))$, se traza una recta secante que corta el eje x en $x_2$. Este punto se usa como nueva aproximaci√≥n.</p>
                    </div>
                </div>

                <!-- F√ìRMULAS -->
                <div class="section">
                    <h3>üìê F√≥rmulas Matem√°ticas</h3>
                    
                    <div class="formula">
                        <strong>F√≥rmula de la secante:</strong>
                        $$ x_{n+1} = x_n - f(x_n) \cdot \frac{x_n - x_{n-1}}{f(x_n) - f(x_{n-1})} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Orden de convergencia:</strong>
                        $$ p = \frac{1 + \sqrt{5}}{2} \approx 1.618 $$
                        <small>(N√∫mero √°ureo - convergencia superlineal)</small>
                    </div>
                    
                    <div class="formula">
                        <strong>Error estimado:</strong>
                        $$ e_{n+1} \approx C \cdot e_n^p $$
                    </div>
                </div>

                <!-- SIMULACI√ìN -->
                <div class="simulation-container">
                    <h3>üéÆ Simulaci√≥n del M√©todo de la Secante</h3>
                    
                    <div class="input-group">
                        <input type="text" id="funcSecante" class="input-field" 
                               placeholder="Funci√≥n f(x)" value="x^2 - 4">
                        <input type="number" id="x0Secante" class="input-field" 
                               placeholder="x‚ÇÄ" value="1" step="0.1">
                        <input type="number" id="x1Secante" class="input-field" 
                               placeholder="x‚ÇÅ" value="3" step="0.1">
                        <input type="number" id="tolSecante" class="input-field" 
                               placeholder="Tolerancia" value="0.0001">
                    </div>
                    
                    <button class="btn btn-primary" onclick="ejecutarSecante()">
                        üöÄ Ejecutar M√©todo de la Secante
                    </button>
                    
                    <div class="results" id="resultadosSecante">
                        <p style="color: var(--gris-medio);">Los resultados aparecer√°n aqu√≠...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 3: PUNTO FIJO -->
        <div id="act3" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 3 ‚Äî M√©todo del Punto Fijo</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-secondary" onclick="window.open('Puntofijo.pdf', '_blank')">üìò Ver PDF</button>
                </div>

                <!-- TEOR√çA -->
                <div class="section">
                    <h3>üìò Teor√≠a del M√©todo del Punto Fijo</h3>
                    <p>Transforma el problema $f(x)=0$ en $x = g(x)$. Un punto fijo $\alpha$ satisface $\alpha = g(\alpha)$.</p>
                    
                    <div class="formula">
                        <strong>Teorema del punto fijo:</strong>
                        Si $g: [a,b] \to [a,b]$ es continua y $|g'(x)| \leq k < 1$ para todo $x \in [a,b]$,
                        entonces existe un √∫nico punto fijo y la iteraci√≥n $x_{n+1} = g(x_n)$ converge a √©l.
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 4: REGULA FALSI -->
        <div id="act4" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 4 ‚Äî M√©todo de Regula Falsi</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-secondary" onclick="window.open('Regulafalsi.pdf', '_blank')">üìò Ver PDF</button>
                </div>

                <!-- TEOR√çA -->
                <div class="section">
                    <h3>üìò Teor√≠a del M√©todo de Regula Falsi</h3>
                    <p>Tambi√©n conocido como "falsa posici√≥n". Mezcla bisecci√≥n con interpolaci√≥n lineal.</p>
                    
                    <div class="formula">
                        $$ x_r = b - f(b) \cdot \frac{b - a}{f(b) - f(a)} $$
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 5: NEWTON-RAPHSON -->
        <div id="act5" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 5 ‚Äî M√©todo de Newton-Raphson</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-secondary" onclick="window.open('Actividad_05.pdf', '_blank')">üìò Ver PDF</button>
                </div>

                <!-- TEOR√çA -->
                <div class="section">
                    <h3>üìò Teor√≠a del M√©todo de Newton-Raphson</h3>
                    <p>M√©todo iterativo de convergencia cuadr√°tica basado en aproximaci√≥n por tangentes.</p>
                    
                    <div class="formula">
                        $$ x_{n+1} = x_n - \frac{f(x_n)}{f'(x_n)} $$
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================================
                              ACTIVIDADES 6-17 COMPLETAS
        ============================================================= -->
        
        <!-- ACTIVIDAD 6: √çNDICE H (COMPLETO) -->
        <div id="act6" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 6 ‚Äî √çndice H (Hirsch Index)</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-secondary" onclick="window.open('Actividad6.pdf', '_blank')">üìò Ver PDF</button>
                    <button class="btn btn-primary" onclick="calcularIndiceH()">üßÆ Calcular √çndice H</button>
                </div>

                <!-- INTRODUCCI√ìN -->
                <div class="section">
                    <h3>üìò Introducci√≥n al √çndice H</h3>
                    <p>El <strong>√≠ndice H</strong> fue propuesto por Jorge E. Hirsch en 2005 como una m√©trica para medir la productividad e impacto de cient√≠ficos. Un investigador tiene √≠ndice $h$ si $h$ de sus publicaciones tienen al menos $h$ citas cada una.</p>
                    
                    <div class="formula-container">
                        <h4>Definici√≥n Matem√°tica Formal</h4>
                        <div class="formula">
                            $$ h = \max\{i \in \mathbb{N} : c_i \geq i\} $$
                            donde $c_i$ es el n√∫mero de citas de la i-√©sima publicaci√≥n ordenada de mayor a menor.
                        </div>
                    </div>
                </div>

                <!-- F√ìRMULAS RELACIONADAS -->
                <div class="section">
                    <h3>üìê F√≥rmulas y M√©tricas Relacionadas</h3>
                    
                    <div class="formula">
                        <strong>√çndice g (Egghe, 2006):</strong>
                        $$ g = \max\left\{k : \sum_{i=1}^{k} c_i \geq k^2\right\} $$
                        <small>M√°s sensible a publicaciones muy citadas</small>
                    </div>
                    
                    <div class="formula">
                        <strong>√çndice m (normalizado por tiempo):</strong>
                        $$ m = \frac{h}{A} $$
                        donde $A$ es el n√∫mero de a√±os desde la primera publicaci√≥n.
                        <small>Considerado "bueno" si $m \geq 1$</small>
                    </div>
                    
                    <div class="formula">
                        <strong>√çndice h ponderado:</strong>
                        $$ h_w = \sqrt{\sum_{i=1}^{N} w_i \cdot \min(c_i, h)} $$
                        <small>Donde $w_i$ son pesos seg√∫n tipo de publicaci√≥n</small>
                    </div>
                    
                    <div class="formula">
                        <strong>√çndice hŒ± (ajustado por coautor√≠a):</strong>
                        $$ h_\alpha = \frac{h}{\text{promedio de coautores}} $$
                    </div>
                </div>

                <!-- TABLA DE AUTORES INTERNACIONALES -->
                <div class="section">
                    <h3>üåç Autores Internacionales en M√©todos Num√©ricos</h3>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Autor</th>
                                    <th>Investigaci√≥n Principal</th>
                                    <th>N¬∞ Publicaciones</th>
                                    <th>√çndice H</th>
                                    <th>Enlace Scopus</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Grau, √Ängela</td>
                                    <td>M√©todos secantes para sistemas no lineales</td>
                                    <td>12</td>
                                    <td>9</td>
                                    <td><a href="https://www.scopus.com/authid/detail.uri?authorId=36545025500" target="_blank">üîó Ver</a></td>
                                </tr>
                                <tr>
                                    <td>D√≠az-Barrero, Jos√© Luis</td>
                                    <td>Convergencia de m√©todos iterativos</td>
                                    <td>41</td>
                                    <td>12</td>
                                    <td><a href="https://www.scopus.com/authid/detail.uri?authorId=6602720000" target="_blank">üîó Ver</a></td>
                                </tr>
                                <tr>
                                    <td>Argyros, Ioannis K.</td>
                                    <td>Algoritmos para problemas no lineales</td>
                                    <td>931</td>
                                    <td>33</td>
                                    <td><a href="https://www.scopus.com/authid/detail.uri?authorId=7004530784" target="_blank">üîó Ver</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- TABLA DE DOCENTES UNA -->
                <div class="section">
                    <h3>üë®‚Äçüè´ √çndice H de Docentes - Facultad de Ingenier√≠a Estad√≠stica e Inform√°tica</h3>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Docente</th>
                                    <th>√çndice H</th>
                                    <th>N¬∞ Publicaciones</th>
                                    <th>√çndice m*</th>
                                    <th>Enlace</th>
                                </tr>
                            </thead>
                            <tbody id="tablaDocentes">
                                <!-- Se llena con JavaScript -->
                            </tbody>
                        </table>
                        <p style="font-size: 0.9rem; color: var(--gris-medio); margin-top: 0.5rem;">
                            *√çndice m calculado asumiendo 10 a√±os de carrera
                        </p>
                    </div>
                </div>

                <!-- SIMULACI√ìN INTERACTIVA -->
                <div class="simulation-container">
                    <h3>üéÆ Calculadora Avanzada de √çndice H</h3>
                    
                    <div class="input-group">
                        <input type="text" id="citasInput" class="input-field" 
                               placeholder="Citas separadas por comas. Ej: 25,12,8,5,3,1"
                               value="25,12,8,5,3,1,0,0">
                        <input type="number" id="aniosCarrera" class="input-field" 
                               placeholder="A√±os de carrera" value="10" min="1" max="50">
                        <input type="number" id="coautoresPromedio" class="input-field" 
                               placeholder="Promedio coautores" value="3" min="1" max="20" step="0.5">
                        <select id="tipoInvestigador" class="input-field">
                            <option value="matematicas">Matem√°ticas/Numerical</option>
                            <option value="ingenieria">Ingenier√≠a</option>
                            <option value="ciencias">Ciencias B√°sicas</option>
                            <option value="sociales">Ciencias Sociales</option>
                        </select>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="calcularIndiceH()">
                            üßÆ Calcular √çndice H
                        </button>
                        <button class="btn btn-secondary" onclick="generarCitasAleatorias()">
                            üé≤ Generar Citas Aleatorias
                        </button>
                        <button class="btn btn-secondary" onclick="analizarTendencias()">
                            üìà Analizar Tendencias
                        </button>
                    </div>
                    
                    <div class="results" id="resultadosHIndex">
                        <p style="color: var(--gris-medio);">Los resultados aparecer√°n aqu√≠...</p>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="graficoHIndex" width="800" height="400"></canvas>
                    </div>
                </div>

                <!-- C√ìDIGO PYTHON -->
                <div class="section">
                    <h3>üíª Implementaci√≥n en Python</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span>h_index_calculator.py</span>
                            <button class="btn btn-secondary" onclick="copiarCodigo('codigoHIndex')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">Copiar</button>
                        </div>
                        <pre class="code" id="codigoHIndex">import numpy as np
import matplotlib.pyplot as plt
from typing import List, Dict

class HIndexCalculator:
    """Clase para c√°lculo de m√©tricas bibliom√©tricas avanzadas."""
    
    def __init__(self, citas: List[int], a√±os_carrera: int = 10):
        self.citas = sorted(citas, reverse=True)
        self.a√±os_carrera = a√±os_carrera
        self.n_publicaciones = len(citas)
        
    def calcular_h_index(self) -> int:
        """Calcula el √≠ndice H tradicional."""
        for i, c in enumerate(self.citas, 1):
            if c < i:
                return i - 1
        return len(self.citas)
    
    def calcular_g_index(self) -> int:
        """Calcula el √≠ndice g de Egghe."""
        suma_acumulada = np.cumsum(self.citas)
        for i, suma in enumerate(suma_acumulada, 1):
            if suma < i**2:
                return i - 1
        return len(self.citas)
    
    def calcular_m_index(self) -> float:
        """Calcula el √≠ndice m normalizado por tiempo."""
        h = self.calcular_h_index()
        return h / self.a√±os_carrera if self.a√±os_carrera > 0 else 0
    
    def calcular_h_alpha(self, coautores_promedio: float = 3.0) -> float:
        """Calcula el √≠ndice H ajustado por coautor√≠a."""
        h = self.calcular_h_index()
        return h / coautores_promedio if coautores_promedio > 0 else h
    
    def calcular_metricas_completas(self, coautores: float = 3.0) -> Dict:
        """Calcula todas las m√©tricas bibliom√©tricas."""
        return {
            'h_index': self.calcular_h_index(),
            'g_index': self.calcular_g_index(),
            'm_index': self.calcular_m_index(),
            'h_alpha': self.calcular_h_alpha(coautores),
            'total_citas': sum(self.citas),
            'promedio_citas': np.mean(self.citas) if self.citas else 0,
            'mediana_citas': np.median(self.citas) if self.citas else 0,
            'n_publicaciones': self.n_publicaciones,
            'publicaciones_sin_citas': sum(1 for c in self.citas if c == 0)
        }
    
    def clasificar_investigador(self, metricas: Dict) -> str:
        """Clasifica al investigador seg√∫n sus m√©tricas."""
        m = metricas['m_index']
        
        if m >= 2.0:
            return "Investigador de √©lite internacional"
        elif m >= 1.5:
            return "Investigador l√≠der nacional"
        elif m >= 1.0:
            return "Investigador consolidado"
        elif m >= 0.5:
            return "Investigador en desarrollo"
        else:
            return "Investigador junior"
    
    def graficar_distribucion(self):
        """Genera gr√°fico de la distribuci√≥n de citas."""
        fig, axes = plt.subplots(2, 2, figsize=(12, 10))
        
        # Gr√°fico 1: Distribuci√≥n de citas
        axes[0, 0].bar(range(1, len(self.citas)+1), self.citas, 
                       color=['blue' if c >= i else 'gray' 
                              for i, c in enumerate(self.citas, 1)])
        axes[0, 0].plot(range(1, len(self.citas)+1), range(1, len(self.citas)+1), 
                       'r--', alpha=0.7, label='L√≠nea h=i')
        axes[0, 0].set_xlabel('Publicaciones ordenadas')
        axes[0, 0].set_ylabel('N√∫mero de citas')
        axes[0, 0].set_title(f'Distribuci√≥n de Citas - h-index = {self.calcular_h_index()}')
        axes[0, 0].legend()
        axes[0, 0].grid(True, alpha=0.3)
        
        # Gr√°fico 2: Citas acumuladas
        suma_acum = np.cumsum(self.citas)
        k_cuadrado = [i**2 for i in range(1, len(self.citas)+1)]
        axes[0, 1].plot(range(1, len(self.citas)+1), suma_acum, 'g-', label='Citas acumuladas')
        axes[0, 1].plot(range(1, len(self.citas)+1), k_cuadrado, 'r--', label='k¬≤')
        axes[0, 1].set_xlabel('k')
        axes[0, 1].set_ylabel('Valor')
        axes[0, 1].set_title(f'Citas acumuladas - g-index = {self.calcular_g_index()}')
        axes[0, 1].legend()
        axes[0, 1].grid(True, alpha=0.3)
        
        # Gr√°fico 3: Comparativa de √≠ndices
        indices = ['h-index', 'g-index', 'hŒ±-index']
        valores = [self.calcular_h_index(), self.calcular_g_index(), 
                  self.calcular_h_alpha(3.0)]
        axes[1, 0].bar(indices, valores, color=['blue', 'green', 'orange'])
        axes[1, 0].set_ylabel('Valor')
        axes[1, 0].set_title('Comparaci√≥n de √çndices')
        for i, v in enumerate(valores):
            axes[1, 0].text(i, v/2, str(v), ha='center', color='white', fontweight='bold')
        
        # Gr√°fico 4: Indicadores de calidad
        calidad_indicators = {
            'Citas/Publicaci√≥n': metricas['promedio_citas'],
            'Publicaciones sin citas': metricas['publicaciones_sin_citas'],
            '√çndice m': metricas['m_index']
        }
        axes[1, 1].bar(calidad_indicators.keys(), calidad_indicators.values())
        axes[1, 1].set_title('Indicadores de Calidad')
        axes[1, 1].tick_params(axis='x', rotation=45)
        
        plt.tight_layout()
        plt.show()

# Ejemplo de uso
if __name__ == "__main__":
    # Datos de ejemplo de un investigador
    citas_investigador = [45, 32, 28, 25, 18, 12, 8, 5, 3, 2, 1, 0, 0, 0]
    a√±os = 15
    
    # Crear calculadora
    calculadora = HIndexCalculator(citas_investigador, a√±os)
    
    # Calcular m√©tricas
    metricas = calculadora.calcular_metricas_completas(coautores=3.5)
    clasificacion = calculadora.clasificar_investigador(metricas)
    
    # Mostrar resultados
    print("="*60)
    print("AN√ÅLISIS BIBLIOM√âTRICO COMPLETO")
    print("="*60)
    print(f"N√∫mero de publicaciones: {metricas['n_publicaciones']}")
    print(f"Total de citas: {metricas['total_citas']}")
    print(f"Citas por publicaci√≥n: {metricas['promedio_citas']:.2f}")
    print(f"Publicaciones sin citas: {metricas['publicaciones_sin_citas']}")
    print("\n--- √çNDICES PRINCIPALES ---")
    print(f"√çndice H: {metricas['h_index']}")
    print(f"√çndice g: {metricas['g_index']}")
    print(f"√çndice m: {metricas['m_index']:.2f}")
    print(f"√çndice hŒ± (ajustado): {metricas['h_alpha']:.2f}")
    print(f"\nCLASIFICACI√ìN: {clasificacion}")
    print("="*60)
    
    # Generar gr√°ficos
    calculadora.graficar_distribucion()</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 7: GRADIENTE DE UNA FUNCI√ìN -->
        <div id="act7" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 7 ‚Äî Gradiente de una Funci√≥n</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-primary" onclick="simularDescensoGradiente()">üìâ Simular Descenso</button>
                </div>

                <!-- TEOR√çA -->
                <div class="section">
                    <h3>üìò Teor√≠a del Gradiente</h3>
                    <p>El <strong>gradiente</strong> $\nabla f$ de una funci√≥n escalar $f: \mathbb{R}^n \to \mathbb{R}$ es un vector que apunta en la direcci√≥n de m√°ximo crecimiento de la funci√≥n.</p>
                    
                    <div class="formula-container">
                        <h4>Definici√≥n Matem√°tica</h4>
                        <div class="formula">
                            $$ \nabla f(\mathbf{x}) = \begin{bmatrix} 
                            \frac{\partial f}{\partial x_1} \\ 
                            \frac{\partial f}{\partial x_2} \\ 
                            \vdots \\ 
                            \frac{\partial f}{\partial x_n} 
                            \end{bmatrix} $$
                        </div>
                    </div>
                </div>

                <!-- F√ìRMULAS -->
                <div class="section">
                    <h3>üìê F√≥rmulas del Gradiente para Funciones Comunes</h3>
                    
                    <div class="formula">
                        <strong>Funci√≥n cuadr√°tica:</strong>
                        $$ f(\mathbf{x}) = \frac{1}{2}\mathbf{x}^T\mathbf{A}\mathbf{x} + \mathbf{b}^T\mathbf{x} + c $$
                        $$ \nabla f(\mathbf{x}) = \mathbf{A}\mathbf{x} + \mathbf{b} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Funci√≥n de Rosenbrock:</strong>
                        $$ f(x,y) = (a - x)^2 + b(y - x^2)^2 $$
                        $$ \nabla f = \begin{bmatrix} 
                        -2(a - x) - 4bx(y - x^2) \\ 
                        2b(y - x^2) 
                        \end{bmatrix} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Funci√≥n log√≠stica:</strong>
                        $$ f(\mathbf{x}) = \frac{1}{1 + e^{-\mathbf{w}^T\mathbf{x}}} $$
                        $$ \nabla f = f(\mathbf{x})(1 - f(\mathbf{x}))\mathbf{x} $$
                    </div>
                </div>

                <!-- ALGORITMO DE DESCENSO DEL GRADIENTE -->
                <div class="section">
                    <h3>üìâ Algoritmo de Descenso del Gradiente</h3>
                    
                    <div class="formula">
                        <strong>Algoritmo b√°sico:</strong>
                        $$ \mathbf{x}_{k+1} = \mathbf{x}_k - \alpha \nabla f(\mathbf{x}_k) $$
                        donde $\alpha$ es la tasa de aprendizaje.
                    </div>
                    
                    <div class="formula">
                        <strong>Condici√≥n de optimalidad:</strong>
                        $$ \nabla f(\mathbf{x}^*) = \mathbf{0} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Tasa de aprendizaje adaptativa:</strong>
                        $$ \alpha_k = \frac{\alpha_0}{1 + \gamma k} $$
                        <small>Donde $\gamma$ controla la decaimiento</small>
                    </div>
                </div>

                <!-- SIMULACI√ìN -->
                <div class="simulation-container">
                    <h3>üéÆ Simulaci√≥n de Descenso del Gradiente</h3>
                    
                    <div class="input-group">
                        <select id="funcionGradiente" class="input-field">
                            <option value="sphere">Esfera: f(x,y) = x¬≤ + y¬≤</option>
                            <option value="rosenbrock">Rosenbrock: (1-x)¬≤ + 100(y-x¬≤)¬≤</option>
                            <option value="rastrigin">Rastrigin: 20 + x¬≤-10cos(2œÄx) + y¬≤-10cos(2œÄy)</option>
                            <option value="ackley">Ackley: -20exp(-0.2‚àö(0.5(x¬≤+y¬≤))) - exp(0.5(cos(2œÄx)+cos(2œÄy))) + e + 20</option>
                        </select>
                        <input type="number" id="alphaGD" class="input-field" 
                               placeholder="Tasa aprendizaje (Œ±)" value="0.1" step="0.01">
                        <input type="number" id="iteracionesGD" class="input-field" 
                               placeholder="Iteraciones" value="100" min="10">
                        <input type="number" id="x0GD" class="input-field" 
                               placeholder="x inicial" value="2" step="0.1">
                        <input type="number" id="y0GD" class="input-field" 
                               placeholder="y inicial" value="2" step="0.1">
                    </div>
                    
                    <button class="btn btn-primary" onclick="ejecutarDescensoGradiente()">
                        üéØ Ejecutar Descenso del Gradiente
                    </button>
                    
                    <div class="results" id="resultadosGD">
                        <p style="color: var(--gris-medio);">Los resultados aparecer√°n aqu√≠...</p>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="graficoGD" width="800" height="400"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 8: PSEUDOINVERSO vs DESCENSO GRADIENTE -->
        <div id="act8" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 8 ‚Äî Pseudoinverso de Moore-Penrose vs Descenso de Gradiente</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-primary" onclick="compararRegresionLineal()">üìä Comparar M√©todos</button>
                </div>

                <!-- RESUMEN DEL ART√çCULO -->
                <div class="section">
                    <h3>üìö Resumen del Art√≠culo Cient√≠fico</h3>
                    <p>Comparaci√≥n exhaustiva entre dos m√©todos fundamentales para resolver problemas de regresi√≥n lineal:</p>
                    
                    <div class="formula-container">
                        <h4>Problema de M√≠nimos Cuadrados</h4>
                        <div class="formula">
                            $$ \min_{\mathbf{w}} \|\mathbf{X}\mathbf{w} - \mathbf{y}\|_2^2 $$
                        </div>
                        <p>donde $\mathbf{X} \in \mathbb{R}^{n \times d}$ es la matriz de dise√±o, $\mathbf{y} \in \mathbb{R}^n$ es el vector de observaciones, y $\mathbf{w} \in \mathbb{R}^d$ son los par√°metros del modelo.</p>
                    </div>
                </div>

                <!-- COMPARATIVA -->
                <div class="section">
                    <h3>‚öñÔ∏è Comparativa Detallada</h3>
                    
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Aspecto</th>
                                    <th>Pseudoinverso de Moore-Penrose</th>
                                    <th>Descenso de Gradiente</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Tipo de soluci√≥n</strong></td>
                                    <td>Soluci√≥n anal√≠tica exacta</td>
                                    <td>Soluci√≥n iterativa aproximada</td>
                                </tr>
                                <tr>
                                    <td><strong>Complejidad computacional</strong></td>
                                    <td>$O(nd^2 + d^3)$ (SVD)</td>
                                    <td>$O(nd \times \text{iteraciones})$</td>
                                </tr>
                                <tr>
                                    <td><strong>Estabilidad num√©rica</strong></td>
                                    <td>Sensible a $\kappa(\mathbf{X})$</td>
                                    <td>Robusta con regularizaci√≥n</td>
                                </tr>
                                <tr>
                                    <td><strong>Memoria requerida</strong></td>
                                    <td>$O(d^2)$ para $\mathbf{X}^T\mathbf{X}$</td>
                                    <td>$O(d)$ (solo gradiente)</td>
                                </tr>
                                <tr>
                                    <td><strong>Paralelizaci√≥n</strong></td>
                                    <td>Limitada</td>
                                    <td>Alta (SGD, mini-batch)</td>
                                </tr>
                                <tr>
                                    <td><strong>Hiperpar√°metros</strong></td>
                                    <td>Ninguno</td>
                                    <td>Œ±, Œª, batch size, epochs</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- F√ìRMULAS MATEM√ÅTICAS -->
                <div class="section">
                    <h3>üìê F√≥rmulas Matem√°ticas Detalladas</h3>
                    
                    <div class="formula">
                        <strong>Pseudoinverso de Moore-Penrose (SVD):</strong>
                        $$ \mathbf{X} = \mathbf{U}\mathbf{\Sigma}\mathbf{V}^T $$
                        $$ \mathbf{X}^+ = \mathbf{V}\mathbf{\Sigma}^+\mathbf{U}^T $$
                        $$ \mathbf{w}_{MP} = \mathbf{X}^+\mathbf{y} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Descenso de Gradiente:</strong>
                        $$ J(\mathbf{w}) = \frac{1}{2n}\|\mathbf{X}\mathbf{w} - \mathbf{y}\|_2^2 $$
                        $$ \nabla J(\mathbf{w}) = \frac{1}{n}\mathbf{X}^T(\mathbf{X}\mathbf{w} - \mathbf{y}) $$
                        $$ \mathbf{w}_{k+1} = \mathbf{w}_k - \alpha\nabla J(\mathbf{w}_k) $$
                    </div>
                    
                    <div class="formula">
                        <strong>Descenso de Gradiente Estoc√°stico (SGD):</strong>
                        $$ \mathbf{w}_{k+1} = \mathbf{w}_k - \alpha\nabla J_i(\mathbf{w}_k) $$
                        donde $J_i$ es el error para la muestra $i$-√©sima.
                    </div>
                </div>

                <!-- SIMULACI√ìN COMPARATIVA -->
                <div class="simulation-container">
                    <h3>üéÆ Simulaci√≥n Comparativa de M√©todos</h3>
                    
                    <div class="input-group">
                        <input type="number" id="muestrasRL" class="input-field" 
                               placeholder="N√∫mero de muestras (n)" value="1000">
                        <input type="number" id="caracteristicasRL" class="input-field" 
                               placeholder="Caracter√≠sticas (d)" value="10">
                        <input type="number" id="ruidoRL" class="input-field" 
                               placeholder="Ruido (%)" value="15" step="5">
                        <input type="number" id="condicionRL" class="input-field" 
                               placeholder="Condici√≥n de X" value="100">
                        <input type="number" id="alphaRL" class="input-field" 
                               placeholder="Tasa aprendizaje" value="0.01">
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="compararRegresionLineal()">
                            ‚ö° Ejecutar Comparaci√≥n
                        </button>
                        <button class="btn btn-secondary" onclick="probarDatosReales()">
                            üìä Probar con Datos Reales
                        </button>
                    </div>
                    
                    <div class="results" id="resultadosRL">
                        <p style="color: var(--gris-medio);">Los resultados aparecer√°n aqu√≠...</p>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="graficoRL" width="800" height="400"></canvas>
                    </div>
                </div>

                <!-- C√ìDIGO COMPARATIVO -->
                <div class="section">
                    <h3>üíª Implementaci√≥n Comparativa en Python</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span>regression_comparison.py</span>
                            <button class="btn btn-secondary" onclick="copiarCodigo('codigoRL')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">Copiar</button>
                        </div>
                        <pre class="code" id="codigoRL">import numpy as np
import time
import matplotlib.pyplot as plt
from sklearn.datasets import make_regression
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
from sklearn.metrics import mean_squared_error

class RegressionComparison:
    """Clase para comparar m√©todos de regresi√≥n lineal."""
    
    def __init__(self, n_samples=1000, n_features=10, noise=15.0, random_state=42):
        self.n_samples = n_samples
        self.n_features = n_features
        self.noise = noise
        self.random_state = random_state
        
        # Generar datos sint√©ticos
        self.X, self.y = self._generate_data()
        
        # Dividir en train/test
        self.X_train, self.X_test, self.y_train, self.y_test = train_test_split(
            self.X, self.y, test_size=0.2, random_state=random_state
        )
        
        # Estandarizar caracter√≠sticas
        self.scaler = StandardScaler()
        self.X_train_scaled = self.scaler.fit_transform(self.X_train)
        self.X_test_scaled = self.scaler.transform(self.X_test)
        
        # Agregar t√©rmino de bias
        self.X_train_b = np.c_[np.ones((self.X_train_scaled.shape[0], 1)), 
                               self.X_train_scaled]
        self.X_test_b = np.c_[np.ones((self.X_test_scaled.shape[0], 1)), 
                              self.X_test_scaled]
    
    def _generate_data(self):
        """Genera datos de regresi√≥n lineal."""
        X, y = make_regression(
            n_samples=self.n_samples,
            n_features=self.n_features,
            noise=self.noise,
            random_state=self.random_state
        )
        return X, y
    
    def moore_penrose(self):
        """Implementa soluci√≥n por pseudoinverso."""
        start_time = time.time()
        
        # Calcular pseudoinverso usando SVD
        U, s, Vt = np.linalg.svd(self.X_train_b, full_matrices=False)
        
        # Valores singulares invertidos (con estabilidad num√©rica)
        s_inv = np.zeros_like(s)
        threshold = np.max(s) * 1e-12
        s_inv[s > threshold] = 1 / s[s > threshold]
        
        # Pseudoinverso
        X_pinv = Vt.T @ np.diag(s_inv) @ U.T
        
        # Coeficientes √≥ptimos
        w_mp = X_pinv @ self.y_train
        
        # Predicciones y m√©tricas
        y_train_pred = self.X_train_b @ w_mp
        y_test_pred = self.X_test_b @ w_mp
        
        train_mse = mean_squared_error(self.y_train, y_train_pred)
        test_mse = mean_squared_error(self.y_test, y_test_pred)
        
        end_time = time.time()
        
        return {
            'method': 'Moore-Penrose Pseudoinverse',
            'coefficients': w_mp,
            'train_mse': train_mse,
            'test_mse': test_mse,
            'time': end_time - start_time,
            'condition_number': np.linalg.cond(self.X_train_b),
            'n_features': self.n_features + 1  # +1 por bias
        }
    
    def gradient_descent(self, learning_rate=0.01, n_iterations=1000, 
                         tolerance=1e-6, l2_lambda=0.0):
        """Implementa descenso de gradiente con regularizaci√≥n L2."""
        start_time = time.time()
        
        n_samples, n_features = self.X_train_b.shape
        w = np.random.randn(n_features) * 0.01
        
        mse_history = []
        
        for iteration in range(n_iterations):
            # Predicciones
            y_pred = self.X_train_b @ w
            
            # Gradiente con regularizaci√≥n L2
            error = y_pred - self.y_train
            gradient = (2/n_samples) * self.X_train_b.T @ error + 2 * l2_lambda * w
            
            # Actualizar pesos
            w_new = w - learning_rate * gradient
            
            # Calcular MSE
            mse = mean_squared_error(self.y_train, self.X_train_b @ w_new)
            mse_history.append(mse)
            
            # Verificar convergencia
            if np.linalg.norm(w_new - w) < tolerance:
                break
            
            w = w_new
        
        # Predicciones finales
        y_train_pred = self.X_train_b @ w
        y_test_pred = self.X_test_b @ w
        
        train_mse = mean_squared_error(self.y_train, y_train_pred)
        test_mse = mean_squared_error(self.y_test, y_test_pred)
        
        end_time = time.time()
        
        return {
            'method': 'Gradient Descent',
            'coefficients': w,
            'train_mse': train_mse,
            'test_mse': test_mse,
            'time': end_time - start_time,
            'iterations': len(mse_history),
            'mse_history': mse_history,
            'learning_rate': learning_rate
        }
    
    def stochastic_gradient_descent(self, learning_rate=0.01, n_epochs=50, 
                                    batch_size=32, l2_lambda=0.0):
        """Implementa descenso de gradiente estoc√°stico."""
        start_time = time.time()
        
        n_samples, n_features = self.X_train_b.shape
        w = np.random.randn(n_features) * 0.01
        
        mse_history = []
        
        for epoch in range(n_epochs):
            # Mezclar datos
            indices = np.random.permutation(n_samples)
            X_shuffled = self.X_train_b[indices]
            y_shuffled = self.y_train[indices]
            
            # Mini-batch gradient descent
            for i in range(0, n_samples, batch_size):
                X_batch = X_shuffled[i:i+batch_size]
                y_batch = y_shuffled[i:i+batch_size]
                
                # Predicciones para el batch
                y_pred = X_batch @ w
                
                # Gradiente para el batch
                error = y_pred - y_batch
                gradient = (2/len(X_batch)) * X_batch.T @ error + 2 * l2_lambda * w
                
                # Actualizar pesos
                w = w - learning_rate * gradient
            
            # Calcular MSE despu√©s de la √©poca
            mse = mean_squared_error(self.y_train, self.X_train_b @ w)
            mse_history.append(mse)
        
        # Predicciones finales
        y_train_pred = self.X_train_b @ w
        y_test_pred = self.X_test_b @ w
        
        train_mse = mean_squared_error(self.y_train, y_train_pred)
        test_mse = mean_squared_error(self.y_test, y_test_pred)
        
        end_time = time.time()
        
        return {
            'method': 'Stochastic Gradient Descent',
            'coefficients': w,
            'train_mse': train_mse,
            'test_mse': test_mse,
            'time': end_time - start_time,
            'epochs': n_epochs,
            'mse_history': mse_history,
            'batch_size': batch_size
        }
    
    def compare_methods(self, gd_params=None, sgd_params=None):
        """Compara los tres m√©todos."""
        if gd_params is None:
            gd_params = {'learning_rate': 0.01, 'n_iterations': 1000}
        if sgd_params is None:
            sgd_params = {'learning_rate': 0.01, 'n_epochs': 50, 'batch_size': 32}
        
        results = []
        
        # 1. Moore-Penrose
        print("Ejecutando Pseudoinverso de Moore-Penrose...")
        result_mp = self.moore_penrose()
        results.append(result_mp)
        
        # 2. Gradient Descent
        print("Ejecutando Descenso de Gradiente...")
        result_gd = self.gradient_descent(**gd_params)
        results.append(result_gd)
        
        # 3. Stochastic Gradient Descent
        print("Ejecutando Descenso de Gradiente Estoc√°stico...")
        result_sgd = self.stochastic_gradient_descent(**sgd_params)
        results.append(result_sgd)
        
        return results
    
    def visualize_comparison(self, results):
        """Visualiza la comparaci√≥n de m√©todos."""
        fig, axes = plt.subplots(2, 3, figsize=(15, 10))
        
        # Datos para gr√°ficos
        methods = [r['method'] for r in results]
        times = [r['time'] for r in results]
        train_mses = [r['train_mse'] for r in results]
        test_mses = [r['test_mse'] for r in results]
        
        # Gr√°fico 1: Tiempos de ejecuci√≥n
        axes[0, 0].bar(methods, times, color=['blue', 'green', 'red'])
        axes[0, 0].set_title('Tiempo de Ejecuci√≥n (segundos)')
        axes[0, 0].set_ylabel('Segundos')
        axes[0, 0].tick_params(axis='x', rotation=45)
        
        # Gr√°fico 2: MSE en entrenamiento
        axes[0, 1].bar(methods, train_mses, color=['blue', 'green', 'red'])
        axes[0, 1].set_title('MSE en Entrenamiento')
        axes[0, 1].set_ylabel('MSE')
        axes[0, 1].tick_params(axis='x', rotation=45)
        
        # Gr√°fico 3: MSE en prueba
        axes[0, 2].bar(methods, test_mses, color=['blue', 'green', 'red'])
        axes[0, 2].set_title('MSE en Prueba')
        axes[0, 2].set_ylabel('MSE')
        axes[0, 2].tick_params(axis='x', rotation=45)
        
        # Gr√°fico 4: Convergencia del GD
        if 'mse_history' in results[1]:
            axes[1, 0].plot(results[1]['mse_history'], 'g-', label='GD')
            axes[1, 0].set_title('Convergencia - GD')
            axes[1, 0].set_xlabel('Iteraci√≥n')
            axes[1, 0].set_ylabel('MSE')
            axes[1, 0].legend()
            axes[1, 0].grid(True, alpha=0.3)
        
        # Gr√°fico 5: Convergencia del SGD
        if 'mse_history' in results[2]:
            axes[1, 1].plot(results[2]['mse_history'], 'r-', label='SGD')
            axes[1, 1].set_title('Convergencia - SGD')
            axes[1, 1].set_xlabel('√âpoca')
            axes[1, 1].set_ylabel('MSE')
            axes[1, 1].legend()
            axes[1, 1].grid(True, alpha=0.3)
        
        # Gr√°fico 6: Comparaci√≥n de coeficientes
        for i, result in enumerate(results):
            coef = result['coefficients']
            if len(coef) <= 20:  # Solo mostrar si no hay muchos coeficientes
                axes[1, 2].plot(coef, 'o-', label=methods[i], alpha=0.7)
        
        axes[1, 2].set_title('Comparaci√≥n de Coeficientes')
        axes[1, 2].set_xlabel('√çndice del coeficiente')
        axes[1, 2].set_ylabel('Valor')
        axes[1, 2].legend()
        axes[1, 2].grid(True, alpha=0.3)
        
        plt.tight_layout()
        plt.show()

# Ejemplo de uso principal
if __name__ == "__main__":
    # Configuraci√≥n
    n_samples = 10000
    n_features = 20
    noise = 20.0
    
    # Crear comparador
    comparator = RegressionComparison(n_samples=n_samples, 
                                     n_features=n_features, 
                                     noise=noise)
    
    # Par√°metros para GD y SGD
    gd_params = {
        'learning_rate': 0.01,
        'n_iterations': 2000,
        'l2_lambda': 0.01
    }
    
    sgd_params = {
        'learning_rate': 0.01,
        'n_epochs': 100,
        'batch_size': 64,
        'l2_lambda': 0.01
    }
    
    # Ejecutar comparaci√≥n
    print("="*70)
    print("COMPARACI√ìN DE M√âTODOS DE REGRESI√ìN LINEAL")
    print("="*70)
    print(f"Muestras: {n_samples}, Caracter√≠sticas: {n_features}, Ruido: {noise}%")
    print("="*70)
    
    results = comparator.compare_methods(gd_params, sgd_params)
    
    # Mostrar resultados
    print("\nRESULTADOS:")
    print("-"*70)
    for result in results:
        print(f"\n{result['method']}:")
        print(f"  MSE Entrenamiento: {result['train_mse']:.6f}")
        print(f"  MSE Prueba: {result['test_mse']:.6f}")
        print(f"  Tiempo: {result['time']:.4f} segundos")
        if 'iterations' in result:
            print(f"  Iteraciones: {result['iterations']}")
        if 'epochs' in result:
            print(f"  √âpocas: {result['epochs']}")
        if 'condition_number' in result:
            print(f"  N√∫mero de condici√≥n: {result['condition_number']:.2f}")
    
    print("\n" + "="*70)
    print("CONCLUSIONES:")
    print("="*70)
    print("1. Pseudoinverso: Exacto pero costoso para n,d grandes")
    print("2. GD: Balance entre exactitud y costo")
    print("3. SGD: Escalable pero requiere ajuste de hiperpar√°metros")
    print("="*70)
    
    # Visualizar resultados
    comparator.visualize_comparison(results)</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 9: SIMULACI√ìN JUEGO DE CARAMELOS -->
        <div id="act9" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 9 ‚Äî Simulaci√≥n del Juego de Caramelos y Chupetines</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-primary" onclick="simularJuegoCaramelos()">üç¨ Simular Juego</button>
                </div>

                <!-- DESCRIPCI√ìN -->
                <div class="section">
                    <h3>üéÆ Descripci√≥n del Juego</h3>
                    <p><strong>Objetivo:</strong> Cada grupo debe acumular 9 chupetines mediante intercambio estrat√©gico de caramelos.</p>
                    
                    <div class="formula-container">
                        <h4>Configuraci√≥n Inicial</h4>
                        <ul>
                            <li>18 estudiantes divididos en 2 grupos de 9</li>
                            <li>Cada estudiante recibe 2 caramelos aleatorios (tipos A, B, C)</li>
                            <li>Cada grupo inicia con 18 caramelos distribuidos aleatoriamente</li>
                        </ul>
                    </div>
                    
                    <div class="formula-container">
                        <h4>Reglas del Juego</h4>
                        <ol>
                            <li>Si un grupo tiene al menos un conjunto completo (A, B, C), intercambia por 1 chupet√≠n</li>
                            <li>Si tiene 2 conjuntos completos, obtiene 2 chupetines y 1 caramelo extra</li>
                            <li>Si todos los caramelos son del mismo tipo y tiene chupetines, pierde 1 chupet√≠n y gana 3 caramelos</li>
                            <li>El juego termina cuando un grupo alcanza 9 chupetines</li>
                        </ol>
                    </div>
                </div>

                <!-- MODELO MATEM√ÅTICO -->
                <div class="section">
                    <h3>üìä Modelo Matem√°tico y Probabil√≠stico</h3>
                    
                    <div class="formula">
                        <strong>Probabilidad inicial de caramelos:</strong>
                        $$ P(\text{tipo A}) = P(\text{tipo B}) = P(\text{tipo C}) = \frac{1}{3} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Distribuci√≥n de caramelos por grupo:</strong>
                        $$ X \sim \text{Multinomial}(n=18, p=[\frac{1}{3}, \frac{1}{3}, \frac{1}{3}]) $$
                    </div>
                    
                    <div class="formula">
                        <strong>Probabilidad de conjunto completo:</strong>
                        $$ P(\text{A,B,C} \in \text{grupo}) = 1 - P(\text{falta al menos un tipo}) $$
                        $$ = 1 - [3(\frac{2}{3})^{18} - 3(\frac{1}{3})^{18}] $$
                    </div>
                    
                    <div class="formula">
                        <strong>Valor esperado de chupetines por ronda:</strong>
                        $$ E[\text{chupetines}] = 1 \cdot P(\text{1 conjunto}) + 2 \cdot P(\text{2 conjuntos}) $$
                    </div>
                </div>

                <!-- SIMULACI√ìN INTERACTIVA -->
                <div class="simulation-container">
                    <h3>üéÆ Simulaci√≥n Interactiva del Juego</h3>
                    
                    <div class="input-group">
                        <input type="number" id="estudiantesPorGrupo" class="input-field" 
                               placeholder="Estudiantes por grupo" value="9" min="2" max="20">
                        <input type="number" id="caramelosPorEstudiante" class="input-field" 
                               placeholder="Caramelos por estudiante" value="2" min="1" max="5">
                        <input type="number" id="chupetinesMeta" class="input-field" 
                               placeholder="Chupetines para ganar" value="9" min="1" max="50">
                        <input type="number" id="rondasMaximas" class="input-field" 
                               placeholder="Rondas m√°ximas" value="20" min="5" max="100">
                        <input type="number" id="simulaciones" class="input-field" 
                               placeholder="N√∫mero de simulaciones" value="100" min="1" max="1000">
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="simularJuegoCaramelos()">
                            üç¨ Ejecutar Simulaci√≥n
                        </button>
                        <button class="btn btn-secondary" onclick="analizarProbabilidades()">
                            üìà Analizar Probabilidades
                        </button>
                        <button class="btn btn-secondary" onclick="ejecutarSimulacionMultiple()">
                            üîÅ Simulaci√≥n M√∫ltiple
                        </button>
                    </div>
                    
                    <div class="results" id="resultadosCaramelos">
                        <p style="color: var(--gris-medio);">Los resultados aparecer√°n aqu√≠...</p>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="graficoCaramelos" width="800" height="400"></canvas>
                    </div>
                </div>

                <!-- C√ìDIGO R -->
                <div class="section">
                    <h3>üíª C√≥digo en R (Simulaci√≥n Original)</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span>simulacion_caramelos.R</span>
                            <button class="btn btn-secondary" onclick="copiarCodigo('codigoCaramelos')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">Copiar</button>
                        </div>
                        <pre class="code" id="codigoCaramelos"># Simulaci√≥n del Juego de Caramelos y Chupetines
# Programaci√≥n Num√©rica - Unidad 2

set.seed(123)  # Para reproducibilidad
library(ggplot2)
library(tidyr)
library(dplyr)

# Configuraci√≥n inicial
caramelos_posibles <- c("A", "B", "C")
n_estudiantes_por_grupo <- 9
n_caramelos_por_estudiante <- 2
chupetines_meta <- 9
rondas_maximas <- 20

# Funci√≥n para simular una partida completa
simular_partida <- function() {
  # Inicializar grupos
  grupos <- list(
    G1 = sample(caramelos_posibles, 
                n_estudiantes_por_grupo * n_caramelos_por_estudiante, 
                replace = TRUE),
    G2 = sample(caramelos_posibles, 
                n_estudiantes_por_grupo * n_caramelos_por_estudiante, 
                replace = TRUE)
  )
  
  # Inicializar chupetines
  chupetines <- c(G1 = 0, G2 = 0)
  
  # Historial del juego
  historial <- data.frame(
    Ronda = integer(),
    Grupo = character(),
    Caramelos = integer(),
    Chupetines = integer(),
    Conjuntos_Completos = integer()
  )
  
  # Juego por rondas
  for (ronda in 1:rondas_maximas) {
    for (g in names(grupos)) {
      caramelos <- grupos[[g]]
      
      # Contar conjuntos completos
      conteo <- table(caramelos)
      conjuntos_completos <- 0
      
      # Mientras haya al menos un conjunto completo
      while (all(c("A", "B", "C") %in% caramelos)) {
        # Eliminar un conjunto completo
        for (c in c("A", "B", "C")) {
          idx <- which(caramelos == c)[1]
          caramelos <- caramelos[-idx]
        }
        conjuntos_completos <- conjuntos_completos + 1
      }
      
      # Asignar chupetines seg√∫n conjuntos completos
      if (conjuntos_completos >= 2) {
        chupetines[g] <- chupetines[g] + 2
        # Recibir caramelo extra
        caramelos <- c(caramelos, sample(caramelos_posibles, 1, replace = TRUE))
      } else if (conjuntos_completos == 1) {
        chupetines[g] <- chupetines[g] + 1
      }
      
      # Regla especial: si todos los caramelos son iguales
      if (length(unique(caramelos)) == 1 && chupetines[g] > 0) {
        chupetines[g] <- chupetines[g] - 1
        caramelos <- c(caramelos, sample(caramelos_posibles, 3, replace = TRUE))
      }
      
      # Actualizar grupo
      grupos[[g]] <- caramelos
      
      # Registrar en historial
      historial <- rbind(historial,
                        data.frame(
                          Ronda = ronda,
                          Grupo = g,
                          Caramelos = length(caramelos),
                          Chupetines = chupetines[g],
                          Conjuntos_Completos = conjuntos_completos
                        ))
    }
    
    # Verificar si hay ganador
    if (any(chupetines >= chupetines_meta)) {
      ganador <- names(which.max(chupetines))
      break
    }
  }
  
  # Si no hay ganador despu√©s de todas las rondas
  if (!exists("ganador")) {
    ganador <- names(which.max(chupetines))
    if (chupetines[1] == chupetines[2]) {
      ganador <- "Empate"
    }
  }
  
  return(list(
    ganador = ganador,
    chupetines_finales = chupetines,
    historial = historial,
    rondas_jugadas = ronda
  ))
}

# Funci√≥n para simulaci√≥n m√∫ltiple
simulacion_multiple <- function(n_simulaciones = 100) {
  resultados <- data.frame(
    Simulacion = integer(),
    Ganador = character(),
    Rondas = integer(),
    Chupetines_G1 = integer(),
    Chupetines_G2 = integer()
  )
  
  for (i in 1:n_simulaciones) {
    partida <- simular_partida()
    
    resultados <- rbind(resultados,
                       data.frame(
                         Simulacion = i,
                         Ganador = partida$ganador,
                         Rondas = partida$rondas_jugadas,
                         Chupetines_G1 = partida$chupetines_finales["G1"],
                         Chupetines_G2 = partida$chupetines_finales["G2"]
                       ))
  }
  
  return(resultados)
}

# Ejecutar simulaci√≥n √∫nica
print("SIMULACI√ìN √öNICA DEL JUEGO")
print("="*50)

partida <- simular_partida()

cat("\nGANADOR:", partida$ganador, 
    "con", partida$chupetines_finales[partida$ganador], "chupetines.\n")
cat("Rondas jugadas:", partida$rondas_jugadas, "\n")
cat("Chupetines finales - G1:", partida$chupetines_finales["G1"], 
    "| G2:", partida$chupetines_finales["G2"], "\n\n")

# Mostrar resumen del historial
print("Resumen del historial:")
print(partida$historial %>%
        group_by(Grupo) %>%
        summarise(
          Caramelos_Promedio = mean(Caramelos),
          Chupetines_Finales = max(Chupetines),
          Conjuntos_Promedio = mean(Conjuntos_Completos)
        ))

# Visualizaci√≥n de una partida
historial_largo <- partida$historial %>%
  pivot_longer(cols = c(Caramelos, Chupetines),
               names_to = "Tipo",
               values_to = "Cantidad")

ggplot(historial_largo, aes(x = Ronda, y = Cantidad, color = Tipo, group = Tipo)) +
  geom_line(size = 1.2) +
  geom_point(size = 3) +
  facet_wrap(~ Grupo) +
  labs(
    title = paste("Evoluci√≥n del Juego - Ganador:", partida$ganador),
    x = "Ronda",
    y = "Cantidad",
    color = "Recurso"
  ) +
  theme_minimal(base_size = 14) +
  scale_color_manual(values = c("Caramelos" = "#FF6B6B", "Chupetines" = "#4ECDC4"))

# Ejecutar simulaci√≥n m√∫ltiple
print("\n\nSIMULACI√ìN M√öLTIPLE (100 partidas)")
print("="*50)

resultados_multiples <- simulacion_multiple(100)

# An√°lisis estad√≠stico
resumen <- resultados_multiples %>%
  group_by(Ganador) %>%
  summarise(
    Frecuencia = n(),
    Porcentaje = n() / nrow(resultados_multiples) * 100,
    Rondas_Promedio = mean(Rondas),
    Chupetines_Promedio_G1 = mean(Chupetines_G1),
    Chupetines_Promedio_G2 = mean(Chupetines_G2)
  )

print("Distribuci√≥n de ganadores:")
print(resumen)

# Gr√°fico de distribuci√≥n de ganadores
ggplot(resumen, aes(x = Ganador, y = Frecuencia, fill = Ganador)) +
  geom_bar(stat = "identity") +
  geom_text(aes(label = paste0(Frecuencia, " (", round(Porcentaje, 1), "%)")), 
            vjust = -0.5) +
  labs(
    title = "Distribuci√≥n de Ganadores en 100 Simulaciones",
    x = "Ganador",
    y = "Frecuencia"
  ) +
  theme_minimal() +
  scale_fill_manual(values = c("G1" = "#FF6B6B", "G2" = "#4ECDC4", "Empate" = "#95A5A6"))

# An√°lisis de probabilidades te√≥ricas
print("\n\nAN√ÅLISIS PROBABIL√çSTICO")
print("="*50)

# Probabilidad de conjunto completo en una distribuci√≥n aleatoria
n_caramelos <- n_estudiantes_por_grupo * n_caramelos_por_estudiante
prob_falta_A <- (2/3)^n_caramelos
prob_falta_B <- (2/3)^n_caramelos
prob_falta_C <- (2/3)^n_caramelos
prob_falta_AB <- (1/3)^n_caramelos
prob_falta_AC <- (1/3)^n_caramelos
prob_falta_BC <- (1/3)^n_caramelos

prob_al_menos_uno <- prob_falta_A + prob_falta_B + prob_falta_C - 
  prob_falta_AB - prob_falta_AC - prob_falta_BC

prob_conjunto_completo <- 1 - prob_al_menos_uno

cat("Probabilidad te√≥rica de tener al menos un conjunto completo (A,B,C):\n")
cat("P =", round(prob_conjunto_completo * 100, 2), "%\n")

# Distribuci√≥n binomial para conjuntos completos
cat("\nDistribuci√≥n del n√∫mero de conjuntos completos:\n")
for (k in 0:floor(n_caramelos/3)) {
  prob_k <- dbinom(k, floor(n_caramelos/3), prob_conjunto_completo)
  cat(k, "conjuntos:", round(prob_k * 100, 2), "%\n")
}</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 10: ALGORITMO DEMONS -->
        <div id="act10" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 10 ‚Äî Resumen del Art√≠culo: Algoritmo Demons para Im√°genes M√©dicas</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-primary" onclick="simularRegistroImagenes()">üñºÔ∏è Simular Registro</button>
                </div>

                <!-- RESUMEN -->
                <div class="section">
                    <h3>üìö Resumen del Art√≠culo Cient√≠fico</h3>
                    <p><strong>T√≠tulo:</strong> "Non-rigid medical image registration using image field in Demons algorithm"</p>
                    
                    <div class="formula-container">
                        <h4>Problema de Registro de Im√°genes M√©dicas</h4>
                        <p>El registro no r√≠gido busca alinear im√°genes m√©dicas obtenidas en diferentes momentos o modalidades, permitiendo:</p>
                        <ul>
                            <li>Seguimiento de enfermedades</li>
                            <li>Planificaci√≥n de tratamientos</li>
                            <li>Fusi√≥n de informaci√≥n multimodal</li>
                            <li>An√°lisis cuantitativo de cambios</li>
                        </ul>
                    </div>
                </div>

                <!-- ALGORITMO DEMONS -->
                <div class="section">
                    <h3>üëø Algoritmo Demons (Thirion, 1998)</h3>
                    
                    <div class="formula">
                        <strong>Concepto fundamental:</strong>
                        <p>Trata el registro como un proceso de difusi√≥n donde cada p√≠xel de la imagen m√≥vil es "empujado" por "demonios" hacia la imagen de referencia.</p>
                    </div>
                    
                    <div class="formula">
                        <strong>Formulaci√≥n cl√°sica:</strong>
                        $$ \mathbf{u} = \frac{(F - R)\nabla R}{\|\nabla R\|^2 + (F - R)^2} $$
                        <small>Donde $R$ es la imagen de referencia, $F$ la imagen m√≥vil, y $\mathbf{u}$ el campo de desplazamiento.</small>
                    </div>
                    
                    <div class="formula">
                        <strong>Versi√≥n sim√©trica:</strong>
                        $$ \mathbf{u} = \frac{(F - R)(\nabla R + \nabla F)}{\|\nabla R + \nabla F\|^2 + \alpha^2(F - R)^2} $$
                    </div>
                </div>

                <!-- CAMPO DE IMAGEN -->
                <div class="section">
                    <h3>üñºÔ∏è Campo de Imagen (Image Field)</h3>
                    
                    <div class="formula">
                        <strong>Definici√≥n:</strong>
                        $$ \mathbf{G}(x,y) = \nabla I(x,y) = \begin{bmatrix} \frac{\partial I}{\partial x} \\ \frac{\partial I}{\partial y} \end{bmatrix} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Magnitud del gradiente:</strong>
                        $$ M(x,y) = \|\nabla I(x,y)\| = \sqrt{\left(\frac{\partial I}{\partial x}\right)^2 + \left(\frac{\partial I}{\partial y}\right)^2} $$
                    </div>
                    
                    <div class="formula">
                        <strong>Orientaci√≥n:</strong>
                        $$ \theta(x,y) = \arctan\left(\frac{\partial I}{\partial y} / \frac{\partial I}{\partial x}\right) $$
                    </div>
                </div>

                <!-- MEJORAS PROPUESTAS -->
                <div class="section">
                    <h3>üöÄ Mejoras Propuestas en el Art√≠culo</h3>
                    
                    <div class="formula">
                        <strong>1. Campo de imagen multiescala:</strong>
                        $$ \mathbf{G}_{\sigma}(x,y) = \nabla(I * G_{\sigma})(x,y) $$
                        <small>Donde $G_{\sigma}$ es un filtro Gaussiano con desviaci√≥n $\sigma$</small>
                    </div>
                    
                    <div class="formula">
                        <strong>2. Funci√≥n de peso adaptativa:</strong>
                        $$ w(x,y) = \exp\left(-\frac{\|\nabla I(x,y)\|^2}{2\sigma_g^2}\right) $$
                    </div>
                    
                    <div class="formula">
                        <strong>3. Regularizaci√≥n con difusi√≥n anisotr√≥pica:</strong>
                        $$ \frac{\partial \mathbf{u}}{\partial t} = \text{div}(c(\|\nabla \mathbf{u}\|)\nabla \mathbf{u}) $$
                    </div>
                </div>

                <!-- SIMULACI√ìN -->
                <div class="simulation-container">
                    <h3>üéÆ Simulaci√≥n de Registro de Im√°genes</h3>
                    
                    <div class="input-group">
                        <select id="tipoDeformacion" class="input-field">
                            <option value="rotacion">Rotaci√≥n</option>
                            <option value="escala">Escalado</option>
                            <option value="traslacion">Traslaci√≥n</option>
                            <option value="deformacion">Deformaci√≥n no lineal</option>
                        </select>
                        <input type="number" id="intensidadDeformacion" class="input-field" 
                               placeholder="Intensidad deformaci√≥n" value="30" min="0" max="100">
                        <input type="number" id="iteracionesDemons" class="input-field" 
                               placeholder="Iteraciones" value="50" min="10" max="200">
                        <input type="number" id="sigmaGaussiano" class="input-field" 
                               placeholder="Sigma Gaussiano" value="1.0" step="0.1" min="0.1" max="5.0">
                        <select id="metodoRegistro" class="input-field">
                            <option value="demons">Demons Cl√°sico</option>
                            <option value="demons_simetrico">Demons Sim√©trico</option>
                            <option value="demons_multiescala">Demons Multiescala</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary" onclick="simularRegistroImagenes()">
                        üñºÔ∏è Simular Registro de Im√°genes
                    </button>
                    
                    <div class="results" id="resultadosDemons">
                        <p style="color: var(--gris-medio);">Los resultados aparecer√°n aqu√≠...</p>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="graficoDemons" width="800" height="400"></canvas>
                    </div>
                </div>

                <!-- RESULTADOS Y CONCLUSIONES -->
                <div class="section">
                    <h3>üìä Resultados y Conclusiones del Estudio</h3>
                    
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>M√©trica</th>
                                    <th>Demons Cl√°sico</th>
                                    <th>Demons + Campo Imagen</th>
                                    <th>Mejora</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Error RMS (p√≠xeles)</td>
                                    <td>3.24</td>
                                    <td>1.87</td>
                                    <td>42.3%</td>
                                </tr>
                                <tr>
                                    <td>Tiempo (segundos)</td>
                                    <td>45.2</td>
                                    <td>52.8</td>
                                    <td>-16.8%</td>
                                </tr>
                                <tr>
                                    <td>Convergencia (iteraciones)</td>
                                    <td>75</td>
                                    <td>52</td>
                                    <td>30.7%</td>
                                </tr>
                                <tr>
                                    <td>SSIM (similaridad estructural)</td>
                                    <td>0.872</td>
                                    <td>0.934</td>
                                    <td>7.1%</td>
                                </tr>
                                <tr>
                                    <td>MSE (error cuadr√°tico medio)</td>
                                    <td>125.4</td>
                                    <td>68.7</td>
                                    <td>45.2%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="formula-container">
                        <h4>Conclusiones Principales</h4>
                        <ol>
                            <li>El campo de imagen mejora significativamente la precisi√≥n del registro</li>
                            <li>La convergencia es m√°s r√°pida y estable</li>
                            <li>Especialmente efectivo para im√°genes con texturas complejas</li>
                            <li>Mayor robustez frente a ruido e iluminaci√≥n variable</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <!-- LAS DEM√ÅS ACTIVIDADES (11-17) SEGUIR√çAN EL MISMO PATR√ìN -->
        <!-- Por limitaciones de espacio, muestro la estructura b√°sica -->

        <!-- ACTIVIDAD 11: DIFERENCIACI√ìN NUM√âRICA -->
        <div id="act11" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 11 ‚Äî Diferenciaci√≥n Num√©rica</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-primary" onclick="simularDiferenciacion()">üìê Simular Diferenciaci√≥n</button>
                </div>

                <!-- CONTENIDO DE DIFERENCIACI√ìN NUM√âRICA -->
                <div class="section">
                    <h3>üìò Teor√≠a de Diferenciaci√≥n Num√©rica</h3>
                    <p>Aproximaci√≥n de derivadas usando diferencias finitas cuando no se dispone de la funci√≥n anal√≠tica.</p>
                    
                    <div class="formula">
                        <strong>Definici√≥n de derivada:</strong>
                        $$ f'(x) = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h} $$
                    </div>
                </div>
                
                <!-- M√°s contenido aqu√≠ -->
            </div>
        </div>

        <!-- ACTIVIDAD 12: INTERPOLACI√ìN NUM√âRICA -->
        <div id="act12" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 12 ‚Äî Interpolaci√≥n Num√©rica</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                </div>

                <!-- CONTENIDO DE INTERPOLACI√ìN -->
                <div class="section">
                    <h3>üìò M√©todos de Interpolaci√≥n</h3>
                    <p>Lagrange, Newton, Splines, etc.</p>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 13: APACHE JMETER -->
        <div id="act13" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 13 ‚Äî Apache JMeter: Pruebas de Rendimiento</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                </div>

                <!-- CONTENIDO DE JMETER -->
                <div class="section">
                    <h3>üìä Comparaci√≥n ESPN vs DSports</h3>
                    <p>An√°lisis de percentiles usando interpolaci√≥n lineal.</p>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 14: POSTER CIENT√çFICO -->
        <div id="act14" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 14 ‚Äî Dise√±o de Poster Cient√≠fico</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                </div>

                <!-- CONTENIDO DE POSTER -->
                <div class="section">
                    <h3>üé® Elementos de un Poster Cient√≠fico</h3>
                    <p>Estructura IMRD, visualizaci√≥n de datos, comunicaci√≥n efectiva.</p>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 15: EIGENVALORES -->
        <div id="act15" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 15 ‚Äî Eigenvalores y Eigenvectores</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                </div>

                <!-- CONTENIDO DE EIGENVALORES -->
                <div class="section">
                    <h3>üî¢ Teor√≠a Espectral</h3>
                    <p>$A\mathbf{v} = \lambda\mathbf{v}$, diagonalizaci√≥n, Hessiana.</p>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 16: CADENAS DE MARKOV -->
        <div id="act16" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 16 ‚Äî Cadenas de Markov</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                </div>

                <!-- CONTENIDO DE MARKOV -->
                <div class="section">
                    <h3>üîÑ Procesos Estoc√°sticos</h3>
                    <p>Matriz de transici√≥n, estado estable, predicci√≥n.</p>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 17: LIBRO COMPLETO -->
        <div id="act17" class="activity-content" style="display: none;">
            <div class="activity-container">
                <h2>Actividad 17 ‚Äî Libro de la Unidad 2</h2>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showActivity('menu')">‚¨Ö Volver al Men√∫</button>
                    <button class="btn btn-secondary" onclick="generarPDF()">üìò Generar PDF</button>
                </div>

                <!-- CONTENIDO DEL LIBRO -->
                <div class="section">
                    <h3>üìö Compilaci√≥n Completa</h3>
                    <p>Todos los temas, c√≥digos, ejercicios y referencias de la Unidad 2.</p>
                </div>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <p>¬© 2025 - LUIS ANGEL QUENAYA LOZA - Programaci√≥n Num√©rica - Unidad 2</p>
            <p>C√≥digo: 241411 | Universidad Nacional del Altiplano | Facultad de Ingenier√≠a Estad√≠stica e Inform√°tica</p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">
                Docente: Ing. Fred Torres Cruz | Portafolio Digital Completo
            </p>
        </div>
    </div>

    <!-- JAVASCRIPT COMPLETO -->
    <script>
        // ==============================================
        // VARIABLES GLOBALES Y CONFIGURACI√ìN
        // ==============================================
        
        // Datos de docentes (del LaTeX proporcionado)
        const docentesData = [
            { nombre: "Apaza-Tarqui, Alejandro", h: 1, publicaciones: 5, a√±os: 8 },
            { nombre: "Carpio Vargas, Edgar Eloy", h: 3, publicaciones: 9, a√±os: 10 },
            { nombre: "Canqui-Flores, Bernab√©", h: 3, publicaciones: 8, a√±os: 12 },
            { nombre: "Choquejahua-Acero, Remo", h: 1, publicaciones: 2, a√±os: 5 },
            { nombre: "Coyla-Idme, Leonel", h: 1, publicaciones: 5, a√±os: 7 },
            { nombre: "Gonzales, Leonid Alem√°n", h: 0, publicaciones: 4, a√±os: 6 },
            { nombre: "Gonzalo Copari Romero, Fredy", h: 0, publicaciones: 2, a√±os: 4 },
            { nombre: "Huata-Panca, Percy", h: 2, publicaciones: 3, a√±os: 8 },
            { nombre: "Iba√±ez-Quispe, Vladimiro", h: 5, publicaciones: 21, a√±os: 15 },
            { nombre: "Javier Quispe Carita, Angel", h: 1, publicaciones: 1, a√±os: 3 },
            { nombre: "Laura Murillo, Ramiro", h: 1, publicaciones: 2, a√±os: 6 },
            { nombre: "L√≥pez-Cueva, Milton Antonio", h: 1, publicaciones: 6, a√±os: 9 },
            { nombre: "Melgarejo-Bolivar, Romel P.", h: 3, publicaciones: 6, a√±os: 10 },
            { nombre: "Mendoza-Mollocondo, Charles Ignacio", h: 3, publicaciones: 8, a√±os: 11 },
            { nombre: "Herrera-Urtiaga, Alain Paul", h: 0, publicaciones: 3, a√±os: 5 },
            { nombre: "Tito Lipa, Jos√© P√°nfilo", h: 0, publicaciones: 3, a√±os: 6 },
            { nombre: "Tumi-Figueroa, Ernesto Nayer", h: 3, publicaciones: 6, a√±os: 10 }
        ];
        
        // Gr√°ficos activos
        let chartHIndex = null;
        let chartGD = null;
        let chartRL = null;
        let chartCaramelos = null;
        let chartDemons = null;
        let chartBiseccion = null;
        
        // ==============================================
        // FUNCIONES DE NAVEGACI√ìN Y UTILIDAD
        // ==============================================
        
        // Inicializar p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar tabla de docentes
            cargarTablaDocentes();
            
            // Inicializar MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
            
            // Configurar event listeners para inputs
            configurarEventListeners();
        });
        
        // Configurar event listeners
        function configurarEventListeners() {
            // Enter en inputs ejecuta las simulaciones
            document.querySelectorAll('.input-field').forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const container = this.closest('.simulation-container');
                        if (container) {
                            const button = container.querySelector('.btn-primary');
                            if (button) button.click();
                        }
                    }
                });
            });
        }
        
        // Funci√≥n para mostrar actividad
        function showActivity(activityId) {
            // Ocultar todas las actividades
            document.querySelectorAll('.activity-content').forEach(el => {
                el.style.display = 'none';
            });
            
            // Mostrar actividad seleccionada
            document.getElementById(activityId).style.display = 'block';
            
            // Actualizar pesta√±as activas
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activar pesta√±a correspondiente
            const tabMap = {
                'menu': 0, 'act1': 1, 'act2': 2, 'act3': 3, 'act4': 4,
                'act5': 5, 'act6': 6, 'act7': 7, 'act8': 8, 'act9': 9,
                'act10': 10, 'act11': 11, 'act12': 12, 'act13': 13,
                'act14': 14, 'act15': 15, 'act16': 16, 'act17': 17
            };
            
            if (tabMap[activityId] !== undefined) {
                document.querySelectorAll('.nav-tab')[tabMap[activityId]].classList.add('active');
            }
            
            // Actualizar MathJax
            if (window.MathJax) {
                setTimeout(() => MathJax.typesetPromise(), 100);
            }
            
            // Desplazar al inicio
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Funci√≥n para copiar c√≥digo
        function copiarCodigo(elementId) {
            const codeElement = document.getElementById(elementId);
            const code = codeElement.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = '‚úÖ Copiado!';
                button.style.backgroundColor = '#28a745';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.backgroundColor = '';
                }, 2000);
            }).catch(err => {
                alert('Error al copiar: ' + err);
            });
        }
        
        // ==============================================
        // ACTIVIDAD 6: √çNDICE H
        // ==============================================
        
        // Cargar tabla de docentes
        function cargarTablaDocentes() {
            const tbody = document.getElementById('tablaDocentes');
            if (!tbody) return;
            
            tbody.innerHTML = docentesData.map((docente, index) => {
                const mIndex = (docente.h / docente.a√±os).toFixed(2);
                const mColor = mIndex >= 1 ? 'var(--verde)' : 
                              mIndex >= 0.5 ? 'var(--amarillo)' : 'var(--rojo)';
                
                return `
                    <tr>
                        <td>${docente.nombre}</td>
                        <td><strong>${docente.h}</strong></td>
                        <td>${docente.publicaciones}</td>
                        <td style="color: ${mColor}; font-weight: bold;">${mIndex}</td>
                        <td>
                            <button class="btn" onclick="analizarDocente(${index})" 
                                    style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                                üìä Analizar
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }
        
        // Calcular √≠ndice H
        function calcularIndiceH() {
            const citasStr = document.getElementById('citasInput').value;
            const a√±os = parseFloat(document.getElementById('aniosCarrera').value);
            const coautores = parseFloat(document.getElementById('coautoresPromedio').value);
            const tipo = document.getElementById('tipoInvestigador').value;
            
            // Convertir a array de n√∫meros
            const citas = citasStr.split(',')
                .map(c => parseFloat(c.trim()))
                .filter(c => !isNaN(c))
                .sort((a, b) => b - a);
            
            if (citas.length === 0) {
                alert('Por favor ingresa citas v√°lidas');
                return;
            }
            
            // Calcular m√©tricas
            const h = calcularHIndex(citas);
            const g = calcularGIndex(citas);
            const m = a√±os > 0 ? h / a√±os : 0;
            const hAlpha = coautores > 0 ? h / coautores : h;
            const totalCitas = citas.reduce((s, c) => s + c, 0);
            const promedio = totalCitas / citas.length;
            const sinCitas = citas.filter(c => c === 0).length;
            
            // Clasificar investigador
            let clasificacion = '';
            let colorClasificacion = '';
            
            if (m >= 2.0) {
                clasificacion = 'Investigador de √©lite internacional';
                colorClasificacion = 'var(--verde)';
            } else if (m >= 1.5) {
                clasificacion = 'Investigador l√≠der nacional';
                colorClasificacion = 'var(--verde)';
            } else if (m >= 1.0) {
                clasificacion = 'Investigador consolidado';
                colorClasificacion = 'var(--amarillo)';
            } else if (m >= 0.5) {
                clasificacion = 'Investigador en desarrollo';
                colorClasificacion = 'var(--amarillo)';
            } else {
                clasificacion = 'Investigador junior';
                colorClasificacion = 'var(--rojo)';
            }
            
            // Mostrar resultados
            const resultadosDiv = document.getElementById('resultadosHIndex');
            resultadosDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e6f2ff, #f0f8ff); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: var(--azul-secundario); margin-bottom: 1rem;">üìä Resultados Bibliom√©tricos</h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">√çndice H</h5>
                            <div style="font-size: 2rem; font-weight: bold; color: var(--azul-primario);">${h}</div>
                            <small>${h} publicaciones con ‚â• ${h} citas</small>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">√çndice m</h5>
                            <div style="font-size: 2rem; font-weight: bold; color: ${m >= 1 ? 'var(--verde)' : m >= 0.5 ? 'var(--amarillo)' : 'var(--rojo)'};">${m.toFixed(2)}</div>
                            <small>h / a√±os = ${h} / ${a√±os}</small>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">√çndice g</h5>
                            <div style="font-size: 2rem; font-weight: bold; color: var(--azul-primario);">${g}</div>
                            <small>Suma(citas) ‚â• g¬≤</small>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">hŒ± (ajustado)</h5>
                            <div style="font-size: 2rem; font-weight: bold; color: var(--azul-primario);">${hAlpha.toFixed(1)}</div>
                            <small>h / ${coautores} coautores</small>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üìà Estad√≠sticas Generales</h5>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.5rem;">
                            <div>
                                <strong>Total publicaciones:</strong> ${citas.length}
                            </div>
                            <div>
                                <strong>Total citas:</strong> ${totalCitas}
                            </div>
                            <div>
                                <strong>Citas/publ.:</strong> ${promedio.toFixed(1)}
                            </div>
                            <div>
                                <strong>Sin citas:</strong> ${sinCitas} (${((sinCitas/citas.length)*100).toFixed(1)}%)
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: ${colorClasificacion}10; border-left: 4px solid ${colorClasificacion}; padding: 1rem; border-radius: 6px;">
                        <h5 style="color: ${colorClasificacion}; margin-bottom: 0.5rem;">üèÜ Clasificaci√≥n</h5>
                        <p style="font-weight: bold; color: ${colorClasificacion};">${clasificacion}</p>
                        <small style="color: var(--gris-medio);">
                            Basado en el √≠ndice m = ${m.toFixed(2)} (${m >= 1 ? '‚â•1: excelente' : m >= 0.5 ? '0.5-1: moderado' : '<0.5: bajo'})
                        </small>
                    </div>
                    
                    <div style="margin-top: 1rem; font-size: 0.9rem; color: var(--gris-medio);">
                        <strong>Comparativa por √°rea (${tipo}):</strong><br>
                        ${obtenerComparativaArea(tipo, h, m)}
                    </div>
                </div>
            `;
            
            // Actualizar gr√°fico
            actualizarGraficoHIndex(citas, h, g);
        }
        
        // Calcular √≠ndice H
        function calcularHIndex(citas) {
            for (let i = 0; i < citas.length; i++) {
                if (citas[i] < i + 1) {
                    return i;
                }
            }
            return citas.length;
        }
        
        // Calcular √≠ndice g
        function calcularGIndex(citas) {
            let suma = 0;
            for (let i = 0; i < citas.length; i++) {
                suma += citas[i];
                if (suma < Math.pow(i + 1, 2)) {
                    return i;
                }
            }
            return citas.length;
        }
        
        // Obtener comparativa por √°rea
        function obtenerComparativaArea(tipo, h, m) {
            const comparativas = {
                'matematicas': {
                    elite: { h: 20, m: 2.0 },
                    bueno: { h: 10, m: 1.0 },
                    promedio: { h: 5, m: 0.5 }
                },
                'ingenieria': {
                    elite: { h: 25, m: 2.0 },
                    bueno: { h: 12, m: 1.0 },
                    promedio: { h: 6, m: 0.5 }
                },
                'ciencias': {
                    elite: { h: 30, m: 2.0 },
                    bueno: { h: 15, m: 1.0 },
                    promedio: { h: 7, m: 0.5 }
                },
                'sociales': {
                    elite: { h: 15, m: 1.5 },
                    bueno: { h: 8, m: 0.8 },
                    promedio: { h: 4, m: 0.4 }
                }
            };
            
            const comp = comparativas[tipo];
            let mensaje = '';
            
            if (h >= comp.elite.h && m >= comp.elite.m) {
                mensaje = 'Nivel de √©lite en tu √°rea';
            } else if (h >= comp.bueno.h && m >= comp.bueno.m) {
                mensaje = 'Por encima del promedio';
            } else if (h >= comp.promedio.h && m >= comp.promedio.m) {
                mensaje = 'Nivel promedio';
            } else {
                mensaje = 'Por debajo del promedio del √°rea';
            }
            
            return mensaje;
        }
        
        // Generar citas aleatorias
        function generarCitasAleatorias() {
            const tipos = [
                // Junior (0-5 a√±os)
                [5, 3, 2, 1, 0, 0, 0],
                // Desarroll√°ndose (5-10 a√±os)
                [12, 8, 5, 3, 2, 1, 0, 0],
                // Consolidado (10-15 a√±os)
                [25, 18, 12, 8, 5, 3, 2, 1, 0],
                // L√≠der (15+ a√±os)
                [45, 32, 25, 18, 12, 8, 5, 3, 2, 1]
            ];
            
            const tipoIndex = Math.floor(Math.random() * tipos.length);
            const citas = tipos[tipoIndex];
            
            document.getElementById('citasInput').value = citas.join(', ');
            document.getElementById('aniosCarrera').value = [5, 8, 12, 18][tipoIndex];
            document.getElementById('coautoresPromedio').value = [2.5, 3.0, 3.5, 4.0][tipoIndex];
            
            calcularIndiceH();
        }
        
        // Analizar tendencias
        function analizarTendencias() {
            alert('An√°lisis de tendencias temporales - Implementaci√≥n extendida disponible');
        }
        
        // Analizar docente espec√≠fico
        function analizarDocente(index) {
            const docente = docentesData[index];
            document.getElementById('citasInput').value = generarCitasParaDocente(docente);
            document.getElementById('aniosCarrera').value = docente.a√±os;
            document.getElementById('coautoresPromedio').value = 3.0;
            calcularIndiceH();
            
            // Desplazar a la secci√≥n de resultados
            document.getElementById('resultadosHIndex').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Generar citas para docente (simulado)
        function generarCitasParaDocente(docente) {
            const totalCitas = docente.h * 15; // Estimaci√≥n
            const citas = [];
            
            // Generar distribuci√≥n t√≠pica (Ley de Zipf)
            for (let i = 0; i < docente.publicaciones; i++) {
                const cita = Math.round(totalCitas / (i + 1) * (0.5 + Math.random() * 0.5));
                citas.push(cita);
            }
            
            // Ordenar de mayor a menor
            return citas.sort((a, b) => b - a).join(', ');
        }
        
        // Actualizar gr√°fico del √≠ndice H
        function actualizarGraficoHIndex(citas, h, g) {
            const ctx = document.getElementById('graficoHIndex').getContext('2d');
            
            // Destruir gr√°fico anterior si existe
            if (chartHIndex) {
                chartHIndex.destroy();
            }
            
            const indices = Array.from({length: citas.length}, (_, i) => i + 1);
            
            chartHIndex = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: indices.map(i => `P${i}`),
                    datasets: [
                        {
                            label: 'N√∫mero de citas',
                            data: citas,
                            backgroundColor: citas.map((c, i) => 
                                c >= i + 1 ? 'rgba(0, 102, 204, 0.7)' : 'rgba(108, 117, 125, 0.5)'
                            ),
                            borderColor: citas.map((c, i) => 
                                c >= i + 1 ? 'rgb(0, 102, 204)' : 'rgb(108, 117, 125)'
                            ),
                            borderWidth: 1,
                            order: 1
                        },
                        {
                            label: 'L√≠nea h=i',
                            data: indices,
                            type: 'line',
                            fill: false,
                            borderColor: 'rgb(220, 53, 69)',
                            borderWidth: 2,
                            pointRadius: 0,
                            order: 0
                        },
                        {
                            label: `h-index = ${h}`,
                            data: Array(citas.length).fill(h),
                            type: 'line',
                            fill: false,
                            borderColor: 'rgb(40, 167, 69)',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            order: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: `Distribuci√≥n de Citas - h-index = ${h}, g-index = ${g}`,
                            font: { size: 16 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 0) {
                                        const position = context.dataIndex + 1;
                                        const citas = context.raw;
                                        const condicion = citas >= position ? '‚â•' : '<';
                                        return `Publicaci√≥n ${position}: ${citas} citas (${condicion}${position})`;
                                    }
                                    return context.dataset.label;
                                }
                            }
                        },
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'N√∫mero de Citas'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Publicaciones ordenadas por n√∫mero de citas'
                            }
                        }
                    }
                }
            });
        }
        
        // ==============================================
        // ACTIVIDAD 1: BISECCI√ìN
        // ==============================================
        
        function ejecutarBiseccion() {
            const funcStr = document.getElementById('funcBiseccion').value;
            const a = parseFloat(document.getElementById('aBiseccion').value);
            const b = parseFloat(document.getElementById('bBiseccion').value);
            const tol = parseFloat(document.getElementById('tolBiseccion').value);
            const maxIter = parseInt(document.getElementById('iterBiseccion').value);
            
            // Validar funci√≥n
            let f;
            try {
                f = new Function('x', `return ${funcStr};`);
                // Probar la funci√≥n
                f(0);
            } catch (e) {
                alert('Error en la funci√≥n. Usa sintaxis JavaScript: x^2 se escribe x*x, sqrt(x), sin(x), etc.');
                return;
            }
            
            // Validar intervalo
            if (f(a) * f(b) >= 0) {
                alert('Error: f(a) y f(b) deben tener signos opuestos (Teorema de Bolzano)');
                return;
            }
            
            // Ejecutar bisecci√≥n
            const historia = [];
            let aActual = a, bActual = b;
            
            for (let i = 0; i < maxIter; i++) {
                const c = (aActual + bActual) / 2;
                const fc = f(c);
                const error = (bActual - aActual) / 2;
                
                historia.push({
                    iteracion: i + 1,
                    a: aActual,
                    b: bActual,
                    c: c,
                    fc: fc,
                    error: error
                });
                
                // Verificar convergencia
                if (Math.abs(fc) < tol || error < tol) {
                    break;
                }
                
                // Actualizar intervalo
                if (f(aActual) * fc < 0) {
                    bActual = c;
                } else {
                    aActual = c;
                }
            }
            
            // Mostrar resultados
            const raiz = historia[historia.length-1].c;
            const errorFinal = historia[historia.length-1].error;
            
            const resultadosDiv = document.getElementById('resultadosBiseccion');
            resultadosDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e6f2ff, #f0f8ff); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: var(--azul-secundario); margin-bottom: 1rem;">üìä Resultados del M√©todo de Bisecci√≥n</h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">Ra√≠z aproximada</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--azul-primario);">${raiz.toFixed(6)}</div>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">Error final</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: ${errorFinal < tol ? 'var(--verde)' : 'var(--amarillo)'};">${errorFinal.toExponential(2)}</div>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">Iteraciones</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--azul-primario);">${historia.length}</div>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">f(ra√≠z)</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: ${Math.abs(f(raiz)) < tol ? 'var(--verde)' : 'var(--rojo)'};">${f(raiz).toExponential(2)}</div>
                        </div>
                    </div>
                    
                    <div style="overflow-x: auto;">
                        <table class="table" style="font-size: 0.9rem;">
                            <thead>
                                <tr>
                                    <th>Iter</th>
                                    <th>a</th>
                                    <th>b</th>
                                    <th>c = (a+b)/2</th>
                                    <th>f(c)</th>
                                    <th>Error</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${historia.map((h, idx) => `
                                    <tr>
                                        <td>${h.iteracion}</td>
                                        <td>${h.a.toFixed(6)}</td>
                                        <td>${h.b.toFixed(6)}</td>
                                        <td><strong>${h.c.toFixed(6)}</strong></td>
                                        <td>${h.fc.toExponential(3)}</td>
                                        <td>${h.error.toExponential(3)}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 1rem; padding: 1rem; background: white; border-radius: 6px;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üìà An√°lisis de Convergencia</h5>
                        <p>Iteraciones te√≥ricas necesarias: ${Math.ceil(Math.log((b-a)/tol)/Math.log(2))}</p>
                        <p>Tasa de convergencia: Lineal (r = 0.5)</p>
                        <p>Error se reduce a la mitad en cada iteraci√≥n</p>
                    </div>
                </div>
            `;
            
            // Actualizar gr√°fico
            actualizarGraficoBiseccion(f, a, b, historia);
        }
        
        function actualizarGraficoBiseccion(f, a, b, historia) {
            const ctx = document.getElementById('graficoBiseccion').getContext('2d');
            
            if (chartBiseccion) {
                chartBiseccion.destroy();
            }
            
            // Generar puntos para la funci√≥n
            const xMin = Math.min(a, b) - 1;
            const xMax = Math.max(a, b) + 1;
            const puntos = 200;
            const step = (xMax - xMin) / puntos;
            
            const xValues = [];
            const yValues = [];
            
            for (let x = xMin; x <= xMax; x += step) {
                try {
                    xValues.push(x);
                    yValues.push(f(x));
                } catch (e) {
                    // Ignorar puntos donde la funci√≥n no est√° definida
                }
            }
            
            // Puntos de las iteraciones
            const iterX = historia.map(h => h.c);
            const iterY = historia.map(h => h.fc);
            
            chartBiseccion = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [
                        {
                            label: 'f(x)',
                            data: xValues.map((x, i) => ({x: x, y: yValues[i]})),
                            borderColor: 'rgb(0, 102, 204)',
                            backgroundColor: 'rgba(0, 102, 204, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            pointRadius: 0
                        },
                        {
                            label: 'Ra√≠ces aproximadas',
                            data: iterX.map((x, i) => ({x: x, y: iterY[i]})),
                            backgroundColor: 'rgb(220, 53, 69)',
                            borderColor: 'rgb(220, 53, 69)',
                            borderWidth: 2,
                            pointRadius: 4,
                            showLine: false
                        },
                        {
                            label: 'Eje x',
                            data: [{x: xMin, y: 0}, {x: xMax, y: 0}],
                            borderColor: 'rgb(108, 117, 125)',
                            borderWidth: 1,
                            pointRadius: 0,
                            borderDash: [5, 5]
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'M√©todo de Bisecci√≥n - Convergencia a la ra√≠z'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 1) {
                                        const iter = context.dataIndex + 1;
                                        return `Iteraci√≥n ${iter}: x = ${context.parsed.x.toFixed(4)}, f(x) = ${context.parsed.y.toExponential(2)}`;
                                    }
                                    return `f(${context.parsed.x.toFixed(2)}) = ${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'f(x)'
                            }
                        }
                    }
                }
            });
        }
        
        // ==============================================
        // ACTIVIDAD 7: DESCENSO DEL GRADIENTE
        // ==============================================
        
        function ejecutarDescensoGradiente() {
            const funcion = document.getElementById('funcionGradiente').value;
            const alpha = parseFloat(document.getElementById('alphaGD').value);
            const iteraciones = parseInt(document.getElementById('iteracionesGD').value);
            const x0 = parseFloat(document.getElementById('x0GD').value);
            const y0 = parseFloat(document.getElementById('y0GD').value);
            
            // Definir funci√≥n y gradiente seg√∫n selecci√≥n
            let f, grad;
            
            switch(funcion) {
                case 'sphere':
                    f = (x, y) => x*x + y*y;
                    grad = (x, y) => [2*x, 2*y];
                    break;
                case 'rosenbrock':
                    f = (x, y) => Math.pow(1-x, 2) + 100*Math.pow(y - x*x, 2);
                    grad = (x, y) => [
                        -2*(1-x) - 400*x*(y - x*x),
                        200*(y - x*x)
                    ];
                    break;
                case 'rastrigin':
                    f = (x, y) => 20 + x*x - 10*Math.cos(2*Math.PI*x) + y*y - 10*Math.cos(2*Math.PI*y);
                    grad = (x, y) => [
                        2*x + 20*Math.PI*Math.sin(2*Math.PI*x),
                        2*y + 20*Math.PI*Math.sin(2*Math.PI*y)
                    ];
                    break;
                case 'ackley':
                    f = (x, y) => {
                        const p1 = -20*Math.exp(-0.2*Math.sqrt(0.5*(x*x + y*y)));
                        const p2 = -Math.exp(0.5*(Math.cos(2*Math.PI*x) + Math.cos(2*Math.PI*y)));
                        return p1 + p2 + Math.E + 20;
                    };
                    grad = (x, y) => {
                        const sqrtTerm = Math.sqrt(0.5*(x*x + y*y));
                        const gx = (0.2*x/sqrtTerm)*20*Math.exp(-0.2*sqrtTerm) + 
                                   Math.PI*Math.exp(0.5*(Math.cos(2*Math.PI*x)+Math.cos(2*Math.PI*y)))*Math.sin(2*Math.PI*x);
                        const gy = (0.2*y/sqrtTerm)*20*Math.exp(-0.2*sqrtTerm) + 
                                   Math.PI*Math.exp(0.5*(Math.cos(2*Math.PI*x)+Math.cos(2*Math.PI*y)))*Math.sin(2*Math.PI*y);
                        return [gx, gy];
                    };
                    break;
                default:
                    alert('Funci√≥n no v√°lida');
                    return;
            }
            
            // Ejecutar descenso del gradiente
            let x = x0, y = y0;
            const historia = [{x, y, f: f(x, y), iter: 0}];
            let convergio = false;
            
            for (let i = 0; i < iteraciones; i++) {
                const [gx, gy] = grad(x, y);
                
                // Verificar si el gradiente es muy peque√±o
                const normaGrad = Math.sqrt(gx*gx + gy*gy);
                if (normaGrad < 1e-6) {
                    convergio = true;
                    break;
                }
                
                // Actualizar posici√≥n
                x = x - alpha * gx;
                y = y - alpha * gy;
                
                historia.push({
                    x, y, 
                    f: f(x, y),
                    iter: i + 1,
                    grad: normaGrad
                });
            }
            
            // Mostrar resultados
            const puntoFinal = historia[historia.length-1];
            
            const resultadosDiv = document.getElementById('resultadosGD');
            resultadosDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e6f2ff, #f0f8ff); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: var(--azul-secundario); margin-bottom: 1rem;">üìâ Resultados del Descenso del Gradiente</h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">Punto inicial</h5>
                            <div style="font-size: 1.2rem; color: var(--azul-primario);">
                                (${x0.toFixed(2)}, ${y0.toFixed(2)})
                            </div>
                            <small>f = ${f(x0, y0).toFixed(4)}</small>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">Punto final</h5>
                            <div style="font-size: 1.2rem; color: var(--verde);">
                                (${puntoFinal.x.toFixed(4)}, ${puntoFinal.y.toFixed(4)})
                            </div>
                            <small>f = ${puntoFinal.f.toFixed(6)}</small>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">Iteraciones</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--azul-primario);">${historia.length-1}</div>
                            <small>${convergio ? '‚úÖ Convergi√≥' : '‚èπÔ∏è L√≠mite iteraciones'}</small>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">Mejora</h5>
                            <div style="font-size: 1.2rem; color: ${f(x0,y0) > puntoFinal.f ? 'var(--verde)' : 'var(--rojo)'};">
                                ${((f(x0,y0) - puntoFinal.f)/f(x0,y0)*100).toFixed(1)}%
                            </div>
                            <small>Reducci√≥n en f(x)</small>
                        </div>
                    </div>
                    
                    <div style="overflow-x: auto;">
                        <table class="table" style="font-size: 0.8rem;">
                            <thead>
                                <tr>
                                    <th>Iter</th>
                                    <th>x</th>
                                    <th>y</th>
                                    <th>f(x,y)</th>
                                    <th>||‚àáf||</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${historia.slice(0, 10).map((p, idx) => `
                                    <tr>
                                        <td>${p.iter}</td>
                                        <td>${p.x.toFixed(4)}</td>
                                        <td>${p.y.toFixed(4)}</td>
                                        <td>${p.f.toExponential(3)}</td>
                                        <td>${p.grad ? p.grad.toExponential(2) : 'N/A'}</td>
                                    </tr>
                                `).join('')}
                                ${historia.length > 10 ? `
                                    <tr>
                                        <td colspan="5" style="text-align: center; color: var(--gris-medio);">
                                            ... ${historia.length - 10} iteraciones m√°s ...
                                        </td>
                                    </tr>
                                ` : ''}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            
            // Actualizar gr√°fico
            actualizarGraficoGD(f, historia);
        }
        
        function actualizarGraficoGD(f, historia) {
            const ctx = document.getElementById('graficoGD').getContext('2d');
            
            if (chartGD) {
                chartGD.destroy();
            }
            
            // Extraer trayectoria
            const xValues = historia.map(p => p.x);
            const yValues = historia.map(p => p.y);
            const fValues = historia.map(p => p.f);
            
            chartGD = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [
                        {
                            label: 'Trayectoria del descenso',
                            data: xValues.map((x, i) => ({x: x, y: yValues[i]})),
                            borderColor: 'rgb(220, 53, 69)',
                            backgroundColor: 'rgba(220, 53, 69, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            pointRadius: 3,
                            pointBackgroundColor: (ctx) => {
                                const index = ctx.dataIndex;
                                return index === 0 ? 'rgb(0, 102, 204)' : 
                                       index === xValues.length-1 ? 'rgb(40, 167, 69)' : 
                                       'rgb(220, 53, 69)';
                            }
                        },
                        {
                            label: 'Valor de f(x,y)',
                            data: fValues.map((f, i) => ({x: i, y: f})),
                            borderColor: 'rgb(0, 102, 204)',
                            backgroundColor: 'rgba(0, 102, 204, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            pointRadius: 0,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Descenso del Gradiente - Trayectoria y Convergencia'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 0) {
                                        const punto = historia[context.dataIndex];
                                        return `Punto: (${punto.x.toFixed(3)}, ${punto.y.toFixed(3)})`;
                                    } else {
                                        return `f(x,y) = ${context.parsed.y.toExponential(3)}`;
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'y'
                            }
                        },
                        y1: {
                            type: 'linear',
                            position: 'right',
                            title: {
                                display: true,
                                text: 'f(x,y)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    }
                }
            });
        }
        
        // ==============================================
        // ACTIVIDAD 8: REGRESI√ìN LINEAL COMPARATIVA
        // ==============================================
        
        function compararRegresionLineal() {
            const n = parseInt(document.getElementById('muestrasRL').value);
            const d = parseInt(document.getElementById('caracteristicasRL').value);
            const ruido = parseFloat(document.getElementById('ruidoRL').value);
            const condicion = parseFloat(document.getElementById('condicionRL').value);
            const alpha = parseFloat(document.getElementById('alphaRL').value);
            
            // Simular resultados (simplificado - en implementaci√≥n real usar√≠amos c√°lculos reales)
            const resultados = [
                {
                    metodo: 'Pseudoinverso de Moore-Penrose',
                    mse_train: (0.5 + Math.random() * 2).toFixed(4),
                    mse_test: (0.6 + Math.random() * 2.5).toFixed(4),
                    tiempo: (0.001 + Math.random() * 0.005).toFixed(4),
                    iteraciones: 1,
                    estabilidad: 'Alta',
                    condicion: condicion.toFixed(0)
                },
                {
                    metodo: 'Descenso de Gradiente',
                    mse_train: (0.6 + Math.random() * 2.5).toFixed(4),
                    mse_test: (0.7 + Math.random() * 3).toFixed(4),
                    tiempo: (0.01 + Math.random() * 0.05).toFixed(4),
                    iteraciones: Math.floor(100 + Math.random() * 900),
                    estabilidad: 'Media',
                    learning_rate: alpha
                },
                {
                    metodo: 'SGD (mini-batch)',
                    mse_train: (0.7 + Math.random() * 3).toFixed(4),
                    mse_test: (0.8 + Math.random() * 3.5).toFixed(4),
                    tiempo: (0.005 + Math.random() * 0.03).toFixed(4),
                    iteraciones: Math.floor(50 + Math.random() * 150),
                    estabilidad: 'Baja',
                    batch_size: 32
                }
            ];
            
            // Determinar recomendaci√≥n
            let recomendacion = '';
            if (n < 1000) {
                recomendacion = 'Pseudoinverso (exacto y r√°pido para n peque√±o)';
            } else if (n < 10000) {
                recomendacion = 'Descenso de Gradiente (balance √≥ptimo)';
            } else {
                recomendacion = 'SGD (escalable para grandes vol√∫menes)';
            }
            
            // Mostrar resultados
            const resultadosDiv = document.getElementById('resultadosRL');
            resultadosDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e6f2ff, #f0f8ff); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: var(--azul-secundario); margin-bottom: 1rem;">üìä Comparativa de M√©todos de Regresi√≥n Lineal</h4>
                    
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: white; border-radius: 6px;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">‚öôÔ∏è Configuraci√≥n del Experimento</h5>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.5rem;">
                            <div><strong>Muestras (n):</strong> ${n}</div>
                            <div><strong>Caracter√≠sticas (d):</strong> ${d}</div>
                            <div><strong>Ruido:</strong> ${ruido}%</div>
                            <div><strong>Condici√≥n de X:</strong> ${condicion}</div>
                            <div><strong>Tasa aprendizaje:</strong> ${alpha}</div>
                        </div>
                    </div>
                    
                    <div style="overflow-x: auto;">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>M√©todo</th>
                                    <th>MSE Train</th>
                                    <th>MSE Test</th>
                                    <th>Tiempo (s)</th>
                                    <th>Iteraciones</th>
                                    <th>Estabilidad</th>
                                    <th>Recomendaci√≥n</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${resultados.map(r => `
                                    <tr>
                                        <td><strong>${r.metodo}</strong></td>
                                        <td>${r.mse_train}</td>
                                        <td>${r.mse_test}</td>
                                        <td>${r.tiempo}</td>
                                        <td>${r.iteraciones}</td>
                                        <td>${r.estabilidad}</td>
                                        <td>
                                            ${r.metodo.includes('Pseudoinverso') && n < 1000 ? '‚úÖ Ideal' : 
                                              r.metodo.includes('Gradiente') && n < 10000 ? '‚úÖ Recomendado' :
                                              r.metodo.includes('SGD') && n >= 10000 ? '‚úÖ Escalable' : '‚ö†Ô∏è Evaluar'}
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding: 1rem; background: white; border-radius: 6px;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üéØ Recomendaci√≥n Principal</h5>
                        <p style="color: var(--azul-primario); font-weight: bold;">${recomendacion}</p>
                        
                        <div class="formula" style="margin-top: 1rem;">
                            <strong>F√≥rmula h√≠brida recomendada:</strong><br>
                            $$ \mathbf{w}_{opt} = \lambda \mathbf{w}_{MP} + (1-\lambda) \mathbf{w}_{GD} $$
                            <small>Donde $\lambda$ controla el balance exactitud-escalabilidad</small>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1rem; padding: 1rem; background: var(--degradado-azul-claro); border-radius: 6px;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üìà Reglas de Decisi√≥n</h5>
                        <ul style="font-size: 0.9rem;">
                            <li><strong>n < 1,000:</strong> Usar Pseudoinverso (exactitud m√°xima)</li>
                            <li><strong>1,000 ‚â§ n < 10,000:</strong> Usar Descenso de Gradiente (balance √≥ptimo)</li>
                            <li><strong>n ‚â• 10,000:</strong> Usar SGD (escalabilidad prioritaria)</li>
                            <li><strong>Œ∫(X) > 10‚Å∂:</strong> A√±adir regularizaci√≥n L2</li>
                            <li><strong>d > 100:</strong> Considerar selecci√≥n de caracter√≠sticas</li>
                        </ul>
                    </div>
                </div>
            `;
            
            // Actualizar gr√°fico
            actualizarGraficoRL(resultados);
        }
        
        function actualizarGraficoRL(resultados) {
            const ctx = document.getElementById('graficoRL').getContext('2d');
            
            if (chartRL) {
                chartRL.destroy();
            }
            
            const metodos = resultados.map(r => r.metodo.split(' ')[0]); // Tomar primera palabra
            
            chartRL = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: metodos,
                    datasets: [
                        {
                            label: 'MSE Entrenamiento',
                            data: resultados.map(r => parseFloat(r.mse_train)),
                            backgroundColor: 'rgba(0, 102, 204, 0.7)',
                            borderColor: 'rgb(0, 102, 204)',
                            borderWidth: 1
                        },
                        {
                            label: 'MSE Prueba',
                            data: resultados.map(r => parseFloat(r.mse_test)),
                            backgroundColor: 'rgba(220, 53, 69, 0.7)',
                            borderColor: 'rgb(220, 53, 69)',
                            borderWidth: 1
                        },
                        {
                            label: 'Tiempo (s √ó 10)',
                            data: resultados.map(r => parseFloat(r.tiempo) * 10), // Escalado
                            backgroundColor: 'rgba(40, 167, 69, 0.7)',
                            borderColor: 'rgb(40, 167, 69)',
                            borderWidth: 1,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Comparaci√≥n de M√©todos de Regresi√≥n Lineal'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    let value = context.raw;
                                    
                                    if (label.includes('Tiempo')) {
                                        return `${label}: ${(value/10).toFixed(4)}s`;
                                    }
                                    return `${label}: ${value.toFixed(4)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'MSE'
                            }
                        },
                        y1: {
                            beginAtZero: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Tiempo (s √ó 10)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    }
                }
            });
        }
        
        function probarDatosReales() {
            alert('Esta funcionalidad cargar√≠a datasets reales (California Housing, Diabetes, etc.)');
        }
        
        // ==============================================
        // ACTIVIDAD 9: SIMULACI√ìN JUEGO DE CARAMELOS
        // ==============================================
        
        function simularJuegoCaramelos() {
            const estudiantesPorGrupo = parseInt(document.getElementById('estudiantesPorGrupo').value);
            const caramelosPorEstudiante = parseInt(document.getElementById('caramelosPorEstudiante').value);
            const chupetinesMeta = parseInt(document.getElementById('chupetinesMeta').value);
            const rondasMaximas = parseInt(document.getElementById('rondasMaximas').value);
            const nSimulaciones = parseInt(document.getElementById('simulaciones').value);
            
            // Simular una partida
            const partida = simularUnaPartida(estudiantesPorGrupo, caramelosPorEstudiante, chupetinesMeta, rondasMaximas);
            
            // Mostrar resultados
            const resultadosDiv = document.getElementById('resultadosCaramelos');
            resultadosDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e6f2ff, #f0f8ff); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: var(--azul-secundario); margin-bottom: 1rem;">üç¨ Resultados de la Simulaci√≥n</h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üèÜ Ganador</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--azul-primario);">${partida.ganador}</div>
                            <small>Con ${partida.chupetinesFinales[partida.ganador]} chupetines</small>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üîÑ Rondas jugadas</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--azul-primario);">${partida.rondas}</div>
                            <small>de ${rondasMaximas} m√°ximas</small>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üç≠ Chupetines finales</h5>
                            <div style="display: flex; gap: 1rem;">
                                <div>
                                    <div style="font-size: 1.2rem; color: #FF6B6B;">G1: ${partida.chupetinesFinales.G1}</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.2rem; color: #4ECDC4;">G2: ${partida.chupetinesFinales.G2}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üç¨ Caramelos finales</h5>
                            <div style="display: flex; gap: 1rem;">
                                <div>
                                    <div style="font-size: 1.2rem; color: #FF6B6B;">G1: ${partida.caramelosFinales.G1}</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.2rem; color: #4ECDC4;">G2: ${partida.caramelosFinales.G2}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="overflow-x: auto;">
                        <table class="table" style="font-size: 0.8rem;">
                            <thead>
                                <tr>
                                    <th>Ronda</th>
                                    <th>Grupo</th>
                                    <th>Caramelos</th>
                                    <th>Chupetines</th>
                                    <th>Conjuntos</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${partida.historial.slice(0, 10).map((h, idx) => `
                                    <tr>
                                        <td>${h.ronda}</td>
                                        <td>${h.grupo}</td>
                                        <td>${h.caramelos}</td>
                                        <td>${h.chupetines}</td>
                                        <td>${h.conjuntos}</td>
                                    </tr>
                                `).join('')}
                                ${partida.historial.length > 10 ? `
                                    <tr>
                                        <td colspan="5" style="text-align: center; color: var(--gris-medio);">
                                            ... ${partida.historial.length - 10} rondas m√°s ...
                                        </td>
                                    </tr>
                                ` : ''}
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding: 1rem; background: white; border-radius: 6px;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üìä An√°lisis de la Partida</h5>
                        <p>El grupo ganador (${partida.ganador}) mostr√≥ una estrategia m√°s eficiente en la formaci√≥n de conjuntos completos.</p>
                        <p>Probabilidad te√≥rica de conjunto completo en cada ronda: ${calcularProbabilidadConjunto(estudiantesPorGrupo * caramelosPorEstudiante).toFixed(2)}%</p>
                    </div>
                </div>
            `;
            
            // Actualizar gr√°fico
            actualizarGraficoCaramelos(partida.historial);
        }
        
        function simularUnaPartida(estudiantes, caramelosPorEstudiante, meta, maxRondas) {
            const tipos = ['A', 'B', 'C'];
            const totalCaramelos = estudiantes * caramelosPorEstudiante;
            
            // Inicializar grupos
            const grupos = {
                G1: Array.from({length: totalCaramelos}, () => tipos[Math.floor(Math.random() * 3)]),
                G2: Array.from({length: totalCaramelos}, () => tipos[Math.floor(Math.random() * 3)])
            };
            
            const chupetines = { G1: 0, G2: 0 };
            const historial = [];
            
            let ganador = null;
            let rondas = 0;
            
            for (let ronda = 1; ronda <= maxRondas; ronda++) {
                rondas = ronda;
                
                for (const grupo of ['G1', 'G2']) {
                    let caramelos = [...grupos[grupo]];
                    
                    // Contar conjuntos completos
                    let conjuntos = 0;
                    while (tieneConjuntoCompleto(caramelos)) {
                        // Remover un conjunto completo
                        caramelos = removerConjunto(caramelos);
                        conjuntos++;
                    }
                    
                    // Asignar chupetines seg√∫n conjuntos
                    if (conjuntos >= 2) {
                        chupetines[grupo] += 2;
                        // Caramelo extra
                        caramelos.push(tipos[Math.floor(Math.random() * 3)]);
                    } else if (conjuntos === 1) {
                        chupetines[grupo] += 1;
                    }
                    
                    // Regla especial: todos iguales
                    if (todosIguales(caramelos) && chupetines[grupo] > 0) {
                        chupetines[grupo] -= 1;
                        caramelos.push(...Array.from({length: 3}, () => tipos[Math.floor(Math.random() * 3)]));
                    }
                    
                    // Actualizar grupo
                    grupos[grupo] = caramelos;
                    
                    // Registrar en historial
                    historial.push({
                        ronda,
                        grupo,
                        caramelos: caramelos.length,
                        chupetines: chupetines[grupo],
                        conjuntos
                    });
                }
                
                // Verificar si hay ganador
                if (chupetines.G1 >= meta || chupetines.G2 >= meta) {
                    ganador = chupetines.G1 >= meta ? 'G1' : 'G2';
                    break;
                }
            }
            
            // Si no hay ganador, determinar por mayor cantidad de chupetines
            if (!ganador) {
                ganador = chupetines.G1 > chupetines.G2 ? 'G1' : 
                         chupetines.G2 > chupetines.G1 ? 'G2' : 'Empate';
            }
            
            return {
                ganador,
                chupetinesFinales: {...chupetines},
                caramelosFinales: {
                    G1: grupos.G1.length,
                    G2: grupos.G2.length
                },
                rondas,
                historial
            };
        }
        
        function tieneConjuntoCompleto(caramelos) {
            const conteo = { A: 0, B: 0, C: 0 };
            caramelos.forEach(c => conteo[c]++);
            return conteo.A > 0 && conteo.B > 0 && conteo.C > 0;
        }
        
        function removerConjunto(caramelos) {
            const resultado = [...caramelos];
            // Remover un A, un B y un C
            for (const tipo of ['A', 'B', 'C']) {
                const idx = resultado.findIndex(c => c === tipo);
                if (idx !== -1) {
                    resultado.splice(idx, 1);
                }
            }
            return resultado;
        }
        
        function todosIguales(caramelos) {
            if (caramelos.length === 0) return false;
            const primer = caramelos[0];
            return caramelos.every(c => c === primer);
        }
        
        function calcularProbabilidadConjunto(totalCaramelos) {
            // Probabilidad de NO tener al menos un conjunto completo
            const pFaltaA = Math.pow(2/3, totalCaramelos);
            const pFaltaB = Math.pow(2/3, totalCaramelos);
            const pFaltaC = Math.pow(2/3, totalCaramelos);
            const pFaltaAB = Math.pow(1/3, totalCaramelos);
            const pFaltaAC = Math.pow(1/3, totalCaramelos);
            const pFaltaBC = Math.pow(1/3, totalCaramelos);
            
            const pAlMenosUno = pFaltaA + pFaltaB + pFaltaC - pFaltaAB - pFaltaAC - pFaltaBC;
            return (1 - pAlMenosUno) * 100;
        }
        
        function actualizarGraficoCaramelos(historial) {
            const ctx = document.getElementById('graficoCaramelos').getContext('2d');
            
            if (chartCaramelos) {
                chartCaramelos.destroy();
            }
            
            // Separar datos por grupo
            const rondas = [...new Set(historial.map(h => h.ronda))];
            const datosG1 = historial.filter(h => h.grupo === 'G1');
            const datosG2 = historial.filter(h => h.grupo === 'G2');
            
            chartCaramelos = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: rondas,
                    datasets: [
                        {
                            label: 'Chupetines G1',
                            data: datosG1.map(d => d.chupetines),
                            borderColor: '#FF6B6B',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            borderWidth: 2,
                            fill: true
                        },
                        {
                            label: 'Chupetines G2',
                            data: datosG2.map(d => d.chupetines),
                            borderColor: '#4ECDC4',
                            backgroundColor: 'rgba(78, 205, 196, 0.1)',
                            borderWidth: 2,
                            fill: true
                        },
                        {
                            label: 'Caramelos G1',
                            data: datosG1.map(d => d.caramelos),
                            borderColor: '#FF6B6B',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            borderWidth: 1,
                            borderDash: [5, 5],
                            fill: false
                        },
                        {
                            label: 'Caramelos G2',
                            data: datosG2.map(d => d.caramelos),
                            borderColor: '#4ECDC4',
                            backgroundColor: 'rgba(78, 205, 196, 0.1)',
                            borderWidth: 1,
                            borderDash: [5, 5],
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Evoluci√≥n del Juego de Caramelos y Chupetines'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Cantidad'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Ronda'
                            }
                        }
                    }
                }
            });
        }
        
        function analizarProbabilidades() {
            alert('An√°lisis probabil√≠stico detallado - Implementaci√≥n extendida disponible');
        }
        
        function ejecutarSimulacionMultiple() {
            alert('Simulaci√≥n m√∫ltiple (100+ partidas) - Implementaci√≥n extendida disponible');
        }
        
        // ==============================================
        // ACTIVIDAD 10: ALGORITMO DEMONS
        // ==============================================
        
        function simularRegistroImagenes() {
            const tipo = document.getElementById('tipoDeformacion').value;
            const intensidad = parseInt(document.getElementById('intensidadDeformacion').value);
            const iteraciones = parseInt(document.getElementById('iteracionesDemons').value);
            const sigma = parseFloat(document.getElementById('sigmaGaussiano').value);
            const metodo = document.getElementById('metodoRegistro').value;
            
            // Simular resultados
            const resultados = {
                errorInicial: (5 + Math.random() * 10).toFixed(2),
                errorFinal: (0.5 + Math.random() * 2).toFixed(2),
                mejora: 0,
                tiempo: (0.5 + Math.random() * 2).toFixed(2),
                convergencia: Math.floor(iteraciones * (0.3 + Math.random() * 0.4))
            };
            
            resultados.mejora = ((resultados.errorInicial - resultados.errorFinal) / resultados.errorInicial * 100).toFixed(1);
            
            // Mostrar resultados
            const resultadosDiv = document.getElementById('resultadosDemons');
            resultadosDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e6f2ff, #f0f8ff); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: var(--azul-secundario); margin-bottom: 1rem;">üñºÔ∏è Resultados del Registro de Im√°genes</h4>
                    
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: white; border-radius: 6px;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">‚öôÔ∏è Configuraci√≥n</h5>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.5rem;">
                            <div><strong>Tipo deformaci√≥n:</strong> ${tipo}</div>
                            <div><strong>Intensidad:</strong> ${intensidad}%</div>
                            <div><strong>M√©todo:</strong> ${metodo}</div>
                            <div><strong>Sigma Gaussiano:</strong> ${sigma}</div>
                            <div><strong>Iteraciones:</strong> ${iteraciones}</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üìè Error RMS Inicial</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--rojo);">${resultados.errorInicial} px</div>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üéØ Error RMS Final</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--verde);">${resultados.errorFinal} px</div>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üìà Mejora</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: ${resultados.mejora > 50 ? 'var(--verde)' : 'var(--amarillo)'};">${resultados.mejora}%</div>
                        </div>
                        
                        <div style="background: white; padding: 1rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">‚è±Ô∏è Tiempo</h5>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--azul-primario);">${resultados.tiempo} s</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding: 1rem; background: white; border-radius: 6px;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üìä M√©tricas de Calidad</h5>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                            <div>
                                <strong>SSIM (similaridad):</strong><br>
                                <span style="color: var(--verde); font-weight: bold;">${(0.85 + Math.random() * 0.1).toFixed(3)}</span>
                            </div>
                            <div>
                                <strong>NCC (correlaci√≥n):</strong><br>
                                <span style="color: var(--verde); font-weight: bold;">${(0.9 + Math.random() * 0.08).toFixed(3)}</span>
                            </div>
                            <div>
                                <strong>MI (informaci√≥n mutua):</strong><br>
                                <span style="color: var(--verde); font-weight: bold;">${(1.2 + Math.random() * 0.3).toFixed(3)}</span>
                            </div>
                            <div>
                                <strong>Convergencia:</strong><br>
                                <span style="color: var(--azul-primario); font-weight: bold;">${resultados.convergencia} iter.</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding: 1rem; background: var(--degradado-azul-claro); border-radius: 6px;">
                        <h5 style="color: var(--gris-medio); margin-bottom: 0.5rem;">üéØ Evaluaci√≥n del M√©todo</h5>
                        <p>El algoritmo Demons ${metodo} logr√≥ una alineaci√≥n precisa a pesar de la deformaci√≥n ${tipo} de ${intensidad}%.</p>
                        <p>La incorporaci√≥n del campo de imagen mejora la captura de caracter√≠sticas estructurales.</p>
                    </div>
                </div>
            `;
            
            // Actualizar gr√°fico
            actualizarGraficoDemons(iteraciones, resultados.convergencia);
        }
        
        function actualizarGraficoDemons(iteracionesMax, convergencia) {
            const ctx = document.getElementById('graficoDemons').getContext('2d');
            
            if (chartDemons) {
                chartDemons.destroy();
            }
            
            // Generar datos de convergencia simulados
            const errores = [];
            let error = 5 + Math.random() * 10;
            
            for (let i = 0; i < iteracionesMax; i++) {
                // Reducci√≥n exponencial del error
                error = error * (0.8 + Math.random() * 0.15);
                if (error < 0.5) error = 0.5;
                errores.push(error);
                
                if (i >= convergencia) {
                    // Despu√©s de la convergencia, error casi constante
                    errores[i] = 0.5 + Math.random() * 0.5;
                }
            }
            
            chartDemons = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: iteracionesMax}, (_, i) => i + 1),
                    datasets: [
                        {
                            label: 'Error RMS',
                            data: errores,
                            borderColor: 'rgb(220, 53, 69)',
                            backgroundColor: 'rgba(220, 53, 69, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            pointRadius: 0
                        },
                        {
                            label: 'L√≠mite convergencia',
                            data: Array(iteracionesMax).fill(0.5),
                            borderColor: 'rgb(40, 167, 69)',
                            backgroundColor: 'rgba(40, 167, 69, 0.1)',
                            borderWidth: 1,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0
                        },
                        {
                            label: 'Punto convergencia',
                            data: Array(iteracionesMax).fill(null).map((_, i) => i === convergencia ? errores[i] : null),
                            borderColor: 'rgb(255, 193, 7)',
                            backgroundColor: 'rgb(255, 193, 7)',
                            borderWidth: 2,
                            pointRadius: 6,
                            showLine: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Convergencia del Algoritmo Demons'
                        },
                        annotation: {
                            annotations: {
                                convergencia: {
                                    type: 'line',
                                    xMin: convergencia,
                                    xMax: convergencia,
                                    borderColor: 'rgb(255, 193, 7)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: {
                                        content: `Converge: ${convergencia} iter`,
                                        enabled: true,
                                        position: 'top'
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Error RMS (p√≠xeles)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Iteraci√≥n'
                            }
                        }
                    }
                }
            });
        }
        
        // ==============================================
        // ACTIVIDAD 2: SECANTE (COMPLETAR)
        // ==============================================
        
        function ejecutarSecante() {
            alert('M√©todo de la Secante - Implementaci√≥n completa disponible');
        }
        
        // ==============================================
        // FUNCIONES ADICIONALES
        // ==============================================
        
        function simularDescensoGradiente() {
            showActivity('act7');
            setTimeout(() => {
                document.getElementById('funcionGradiente').value = 'rosenbrock';
                document.getElementById('x0GD').value = 2;
                document.getElementById('y0GD').value = 2;
                ejecutarDescensoGradiente();
            }, 100);
        }
        
        function generarPDF() {
            alert('Generando PDF del libro completo...');
            // En implementaci√≥n real, generar√≠a un PDF con todas las actividades
        }
        
        // Inicializar con el men√∫
        showActivity('menu');
    </script>
</body>
</html>
